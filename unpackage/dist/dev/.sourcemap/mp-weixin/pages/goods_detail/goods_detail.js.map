{"version":3,"sources":["uni-app:///main.js","webpack:////Users/lisicheng/project/lijian/pages/goods_detail/goods_detail.vue?df74","webpack:////Users/lisicheng/project/lijian/pages/goods_detail/goods_detail.vue?8a69","webpack:////Users/lisicheng/project/lijian/pages/goods_detail/goods_detail.vue?332f","webpack:////Users/lisicheng/project/lijian/pages/goods_detail/goods_detail.vue?da14","uni-app:///pages/goods_detail/goods_detail.vue","webpack:////Users/lisicheng/project/lijian/pages/goods_detail/goods_detail.vue?9993","webpack:////Users/lisicheng/project/lijian/pages/goods_detail/goods_detail.vue?934d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","mixins","data","serciveConfig","addressId","addressList","isDischarge","pageStatus","pagesData","pageErrorMsg","scrollTop","percent","showShare","goodsInfo","free_shipping_tips","service_guarantee","member_level","address","stock_show","goodsComment","goods_id","showSafeguard","isGoodsCollect","showGoodsSpec","showCoupons","goodsSpecOptions","spec","specButtonsList","goodsCouponList","goodsCouponActive","specButtonsGroups","buy","event","text","cart","distribution","reCheck","cartId","computed","cartNum","goodsCouponSpecs","payload","specValueStr","handleSpot","result","methods","gotoService","path","onPresell","query","id","apiAddressListsFun","console","getPage","type","content","uni","title","changeGoodsSpec","onCart","changeCollect","value","is_collect","then","catch","goHome","goCart","onBuy","getCoupon","onGoodsOptions","style","border","color","backgroundColor","handleCartAdd","number","item_id","goods_num","handleBuy","from","address_id","source","goods","initGoodsDetail","visit","resolve","reject","getServiceConfig","initMarketing","handleSend","onPageScroll","onLoad","options","setTimeout","onShareAppMessage","image","imageUrl","onHide","onShow"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACsC;;;AAGjG;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mOAEN;AACP,KAAK;AACL;AACA,aAAa,6KAEN;AACP,KAAK;AACL;AACA,aAAa,iNAEN;AACP,KAAK;AACL;AACA,aAAa,uKAEN;AACP,KAAK;AACL;AACA,aAAa,yOAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,aAAa,2MAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,aAAa,2PAEN;AACP,KAAK;AACL;AACA,aAAa,2MAEN;AACP,KAAK;AACL;AACA,aAAa,6NAEN;AACP,KAAK;AACL;AACA,aAAa,qSAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,aAAa,2MAEN;AACP,KAAK;AACL;AACA,aAAa,2MAEN;AACP,KAAK;AACL;AACA,aAAa,iQAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChPA;AAAA;AAAA;AAAA;AAA2zB,CAAgB,0yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACga/0B;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA,eAEA;EACAC;EACAC;EAEAC;IACA;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAC;QACAC;MACA;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACA;MACAC;QACAC;UACAC;UACAC;QACA;QACAC;UACAF;UACAC;QACA;MACA;MACAE;MACAC;MAAA;MACAC;IACA;EACA;EAEAC,wDACA,8FAEA;IACAC;MAAA;IAAA;EACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;QACA;QACAC;MACA;MAEA;IACA;IAEA;IACAC;MAAA;MACA;IACA;IAEA;IACAC;MACA;QACA;QACA;QACA;UACAC;QACA;UACAA;QACA;;QACA;MACA;IACA;EAAA,EACA;EAEAC;IACAC;MACA;QACAC;MACA;IACA;IACA;IACAC;MACA;QACAD;QACAE;UACAC;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;QACAC;QACAlC;MACA;QACA;UAAAmC;QAEA;QACAC;UACAC;QACA;MACA;IACA;IACA;IACAC;MACA;MACAN;IACA;IAEA;IACAO;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;MACAC;MACA;MAEA;QACAzC;QACA0C;MACA,GACAC;QACA;MACA,GACAC;QACAZ;MACA;IACA;IAEAa;MACA;QACAlB;MACA;IACA;IACA;IACAmB;MACA;QACAnB;MACA;IACA;IAEA;IACAoB;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MAEA;QACAlB;MACA,GACAa;QACA;UACAN;QACA;QACA;MACA,GACAO;QACAZ;QACA;MACA;IACA;IAEA;IACAiB;MACA;MACA;MAEA;QACA,wDAEA;UACAC;YACAC;YACAC;YACAC;UACA;QAAA,IAEA,2BACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAAC;MACA;MAEA;QACAC;QACAC;MACA,GACAd;QACA;UACAN;QACA;QACA;QACA;QACA;MACA,GACAO;QACA;MACA;IACA;IAEA;IACAc;MAAA;QAAAH;MACA;MACA;QACA5B;QACAE;UACA8B;UACAC;UACAvC;YACAwC;YACAC,QACA;cACAL;cACAD;YACA;UAEA;QACA;MACA;IACA;IAEA;IACAO;MAAA;MACA;QACA;UACAjC;UACAkC;UACAJ;QACA,GACAjB;UACA;UACA;UACA;UACA;UACA;UACA;QACA,GACAA;UAQAsB;QACA,GACArB;UACAsB;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAArF;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAsF;MAAA;MACA;QACA;UACAtC;QACA,GACAa;UACA;UACAsB;QACA,GACArB;UACAsB;QACA;MACA;IACA;IACAG;MAAA;MACAjC;QAAA;UAAA;YAAA;cAAA;gBAAA;kBACA;kBAAA;kBAAA,OACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA;MACA;QACAT;QACAE;UACAK;QACA;MACA;IACA;EACA;EACAoC;IACA;IACA;IACA;IACA;EACA;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAC,gCACA;cACA;gBACA;gBACA;gBAAA;gBACAC;kBACA;gBACA;cACA;;cAEA;cACAD,mBACA,qEACA;cAAA;cAAA,IAGA;gBAAA;gBAAA;cAAA;cAAA;YAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA,OAEA;YAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA,OAEA;YAAA;cACA;cACA;cAAA;cAAA;YAAA;cAAA;cAAA;cAEAxC;cACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAsBA;EAEA0C;IACA;MAAA9F;MAAA+F;IACA;MACAtC;MACAV;MACAiD;IACA;EACA;EACAC;IACA;EACA;EACAC;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACA;cACA;cACA;cACA;;cAEA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC50BA;AAAA;AAAA;AAAA;AAAsiD,CAAgB,i8CAAG,EAAC,C;;;;;;;;;;;ACA1jD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/goods_detail/goods_detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/goods_detail/goods_detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods_detail.vue?vue&type=template&id=706a1a46&scoped=true&\"\nvar renderjs\nimport script from \"./goods_detail.vue?vue&type=script&lang=js&\"\nexport * from \"./goods_detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods_detail.vue?vue&type=style&index=0&id=706a1a46&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"706a1a46\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/goods_detail/goods_detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=template&id=706a1a46&scoped=true&\"","var components\ntry {\n  components = {\n    navbar: function () {\n      return import(\n        /* webpackChunkName: \"components/navbar/navbar\" */ \"@/components/navbar/navbar.vue\"\n      )\n    },\n    bubble: function () {\n      return import(\n        /* webpackChunkName: \"components/bubble/bubble\" */ \"@/components/bubble/bubble.vue\"\n      )\n    },\n    goodsSwiper: function () {\n      return import(\n        /* webpackChunkName: \"components/goods-swiper/goods-swiper\" */ \"@/components/goods-swiper/goods-swiper.vue\"\n      )\n    },\n    price: function () {\n      return import(\n        /* webpackChunkName: \"components/price/price\" */ \"@/components/price/price.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-icon/u-icon\" */ \"@/components/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-popup/u-popup\" */ \"@/components/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    couponCard: function () {\n      return import(\n        /* webpackChunkName: \"components/coupon-card/coupon-card\" */ \"@/components/coupon-card/coupon-card.vue\"\n      )\n    },\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-empty/u-empty\" */ \"@/components/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    goodsSpec: function () {\n      return import(\n        /* webpackChunkName: \"components/goods-spec/goods-spec\" */ \"@/components/goods-spec/goods-spec.vue\"\n      )\n    },\n    wReviews: function () {\n      return import(\n        /* webpackChunkName: \"components/widgets/reviews/reviews\" */ \"@/components/widgets/reviews/reviews.vue\"\n      )\n    },\n    wGoodsrecom: function () {\n      return import(\n        /* webpackChunkName: \"components/widgets/goodsrecom/goodsrecom\" */ \"@/components/widgets/goodsrecom/goodsrecom.vue\"\n      )\n    },\n    uParse: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-parse/u-parse\" */ \"@/components/uview-ui/components/u-parse/u-parse.vue\"\n      )\n    },\n    uBadge: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-badge/u-badge\" */ \"@/components/uview-ui/components/u-badge/u-badge.vue\"\n      )\n    },\n    sharePopup: function () {\n      return import(\n        /* webpackChunkName: \"components/share-popup/share-popup\" */ \"@/components/share-popup/share-popup.vue\"\n      )\n    },\n    pageStatus: function () {\n      return import(\n        /* webpackChunkName: \"components/page-status/page-status\" */ \"@/components/page-status/page-status.vue\"\n      )\n    },\n    uBackTop: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-back-top/u-back-top\" */ \"@/components/uview-ui/components/u-back-top/u-back-top.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var a0 = {\n    background: \"rgba(256,256,256,\" + _vm.percent + \")\",\n  }\n  var m0 =\n    _vm.goodsInfo.member_price !== \"\" &&\n    !!_vm.userInfo.id &&\n    _vm.goodsInfo.member_level.name\n      ? _vm.$getImageUri(\"resource/image/shopapi/default/good_vip.png\")\n      : null\n  var m1 =\n    _vm.goodsInfo.member_price !== \"\" &&\n    !!_vm.userInfo.id &&\n    _vm.goodsInfo.member_level.name\n      ? Number(_vm.goodsSpecOptions.spec.sell_price || _vm.goodsInfo.sell_price)\n      : null\n  var m2 = !(\n    _vm.goodsInfo.member_price !== \"\" &&\n    !!_vm.userInfo.id &&\n    _vm.goodsInfo.member_level.name\n  )\n    ? Number(_vm.goodsInfo.lineation_price)\n    : null\n  var g0 = _vm.goodsCouponSpecs.length\n  var l0 = g0\n    ? _vm.__map(_vm.goodsCouponSpecs, function (item, __i0__) {\n        var $orig = _vm.__get_orig(item)\n        var m3 = item.condition_type == 1 ? _vm.handleSpot(item.money) : null\n        var m4 =\n          item.condition_type == 2 ? _vm.handleSpot(item.condition_money) : null\n        var m5 = item.condition_type == 2 ? _vm.handleSpot(item.money) : null\n        var m6 =\n          item.condition_type == 3 ? _vm.handleSpot(item.condition_money) : null\n        var m7 =\n          item.condition_type == 3 ? _vm.handleSpot(item.discount_ratio) : null\n        return {\n          $orig: $orig,\n          m3: m3,\n          m4: m4,\n          m5: m5,\n          m6: m6,\n          m7: m7,\n        }\n      })\n    : null\n  var l1 = _vm.__map(_vm.goodsCouponList, function (item, __i1__) {\n    var $orig = _vm.__get_orig(item)\n    var a1 = {\n      name: \"领取\",\n      theme: \"primary\",\n      disable: !!item.is_available,\n    }\n    return {\n      $orig: $orig,\n      a1: a1,\n    }\n  })\n  var g1 = _vm.goodsCouponList.length\n  var g2 =\n    _vm.distribution.is_show && _vm.distribution.earnings > 0\n      ? Number(_vm.distribution.ratio).toFixed(2)\n      : null\n  var g3 = _vm.goodsInfo.service_guarantee.length\n  var l2 = g3\n    ? _vm.__map(_vm.goodsInfo.service_guarantee, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var g4 = _vm.goodsInfo.service_guarantee.length\n        return {\n          $orig: $orig,\n          g4: g4,\n        }\n      })\n    : null\n  var a2 = {\n    image: _vm.goodsInfo.image,\n    price: _vm.goodsInfo.sell_price,\n    stock: _vm.goodsInfo.total_stock,\n    unit: _vm.goodsInfo.unit_name,\n    limit_type: _vm.goodsInfo.limit_type,\n    limit_value: _vm.goodsInfo.limit_value,\n    buy_num: _vm.goodsInfo.buy_num,\n    cart_goods_num: _vm.goodsInfo.cart_goods_num,\n  }\n  var a3 = {\n    name: _vm.goodsInfo.name,\n    image: _vm.goodsInfo.image,\n  }\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showCoupons = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.showShare = true\n    }\n    _vm.e2 = function ($event) {\n      _vm.showCoupons = false\n    }\n    _vm.e3 = function ($event) {\n      _vm.showShare = true\n    }\n    _vm.e4 = function ($event) {\n      _vm.showSafeguard = true\n    }\n    _vm.e5 = function ($event) {\n      _vm.showSafeguard = false\n    }\n    _vm.e6 = function ($event) {\n      _vm.showSafeguard = false\n    }\n    _vm.e7 = function ($event) {\n      _vm.showGoodsSpec = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        a0: a0,\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        g0: g0,\n        l0: l0,\n        l1: l1,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        l2: l2,\n        a2: a2,\n        a3: a3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"goods-detail\" :class=\"themeName\">\n        <navbar\n            title=\"商品详情\"\n            :background=\"{ background: `rgba(256,256,256,${percent})` }\"\n            :titleColor=\"`rgba(0,0,0,${percent})`\"\n            :immersive=\"true\"\n        ></navbar>\n        <!-- 轮播图 -->\n        <bubble top=\"220rpx\" :page=\"2\" :discharge=\"isDischarge\"></bubble>\n        <goods-swiper\n            :images=\"goodsInfo.goods_image\"\n            :video=\"goodsInfo.video\"\n            :video-cover=\"goodsInfo.video_cover\"\n        />\n        <view\n            class=\"info-header\"\n            v-if=\"goodsInfo.member_price !== '' && !!userInfo.id && goodsInfo.member_level.name\"\n            :style=\"\n                'background-image: url(' +\n                $getImageUri('resource/image/shopapi/default/good_vip.png') +\n                ')'\n            \"\n        >\n            <view class=\"vip-name\">\n                <view class=\"line1\"> {{ goodsInfo.member_level.name }}价 </view>\n            </view>\n            <price\n                :content=\"goodsInfo.member_price\"\n                :weight=\"500\"\n                color=\"#E0A356\"\n                mainSize=\"48rpx\"\n                minorSize=\"48rpx\"\n            >\n            </price>\n            <!-- 原价 -->\n            <price\n                style=\"margin-left: 10rpx\"\n                color=\"gray\"\n                :content=\"goodsSpecOptions.spec.sell_price || goodsInfo.sell_price\"\n                :line-through=\"true\"\n                v-if=\"Number(goodsSpecOptions.spec.sell_price || goodsInfo.sell_price)\"\n            />\n        </view>\n        <!-- 商品基础信息 -->\n        <view\n            class=\"goods-info\"\n            :style=\"{\n                'margin-top': goodsInfo.member_price !== '' && !!userInfo.id ? '-90rpx' : '30rpx'\n            }\"\n        >\n            <view class=\"flex row-between col-top\">\n                <view\n                    class=\"flex\"\n                    v-if=\"\n                        !(\n                            goodsInfo.member_price !== '' &&\n                            !!userInfo.id &&\n                            goodsInfo.member_level.name\n                        )\n                    \"\n                >\n                    <!-- 原价 -->\n                    <price\n                        :content=\"goodsSpecOptions.spec.sell_price || goodsInfo.sell_price\"\n                        main-size=\"46rpx\"\n                        minor-size=\"32rpx\"\n                        fontWeight=\"bolder\"\n                        :color=\"themeColor\"\n                    >\n                        <view slot=\"suffix\" class=\"muted line-through m-l-12 xxs\">\n                            <!-- 划线价 -->\n                            <price\n                                :content=\"\n                                    goodsSpecOptions.spec.lineation_price ||\n                                    goodsInfo.lineation_price\n                                \"\n                                :line-through=\"true\"\n                                v-if=\"Number(goodsInfo.lineation_price)\"\n                            />\n                        </view>\n                    </price>\n                </view>\n            </view>\n            <view class=\"flex discounts\" @tap=\"showCoupons = true\" v-if=\"goodsCouponSpecs.length\">\n                <block v-for=\"item in goodsCouponSpecs\" :key=\"item\">\n                    <view class=\"coupon-tag xxs\" v-if=\"item.condition_type == 1\"\n                        >无门槛¥{{ handleSpot(item.money) }}</view\n                    >\n\n                    <view class=\"coupon-tag xxs\" v-if=\"item.condition_type == 2\"\n                        >满¥{{ handleSpot(item.condition_money) }}减¥{{\n                            handleSpot(item.money)\n                        }}</view\n                    >\n                    <view class=\"coupon-tag xxs\" v-if=\"item.condition_type == 3\"\n                        >满¥{{ handleSpot(item.condition_money) }}打{{\n                            handleSpot(item.discount_ratio)\n                        }}折</view\n                    >\n                </block>\n                <view style=\"margin-left: auto\" :style=\"{ color: themeColor }\">\n                    <text>领券</text>\n                    <u-icon name=\"arrow-right\" class=\"muted nr\" :style=\"{ color: themeColor }\" />\n                </view>\n            </view>\n\n            <view class=\"lg goods-main\">\n                <view class=\"goods-name\">\n                    {{ goodsInfo.name }}\n                </view>\n                <view class=\"goods-items\">\n                    <view class=\"goods-item\" @tap=\"showShare = true\">\n                        <u-icon name=\"share\" size=\"36\" />\n                        <text class=\"m-t-5 muted xxs\">分享</text>\n                    </view>\n                    <view class=\"goods-item\" @tap=\"changeCollect(isGoodsCollect)\">\n                        <template v-if=\"isGoodsCollect\">\n                            <u-icon name=\"star-fill\" :color=\"themeColor\" size=\"36\" />\n                        </template>\n                        <template v-else>\n                            <u-icon name=\"star\" size=\"36\" />\n                        </template>\n                        <text class=\"m-t-5 muted xxs\">收藏</text>\n                    </view>\n                </view>\n            </view>\n        </view>\n        <view class=\"flex row-between muted xs goods-stock\">\n            <template v-if=\"goodsInfo.stock_show\">\n                <view>库存: {{ goodsInfo.total_stock }}</view>\n            </template>\n            <view>销量: {{ goodsInfo.sales_num }}</view>\n            <view>浏览量: {{ goodsInfo.click_num }}</view>\n        </view>\n\n        <!-- S 优惠券popup -->\n        <u-popup\n            v-model=\"showCoupons\"\n            mode=\"bottom\"\n            border-radius=\"14\"\n            :closeable=\"false\"\n            :safe-area-inset-bottom=\"true\"\n            mask-close-able\n        >\n            <view class=\"coupons\">\n                <view class=\"coupons-header\">\n                    <text>领券</text>\n                    <u-icon name=\"close\" color=\"#666666\" @tap=\"showCoupons = false\" />\n                </view>\n\n                <view class=\"coupons-main\">\n                    <scroll-view :scroll-y=\"true\" style=\"height: 700rpx; touch-action: none\">\n                        <view class=\"coupons-item\" v-for=\"item in goodsCouponList\" :key=\"item.id\">\n                            <coupon-card\n                                mode=\"get\"\n                                :discount_max_money=\"item.discount_max_money\"\n                                :discount_ratio=\"item.discount_ratio\"\n                                :condition_type=\"item.condition_type\"\n                                :name=\"item.name\"\n                                :money=\"item.money\"\n                                :condition=\"item.condition\"\n                                :time=\"item.effective_time\"\n                                :scene=\"item.use_scene\"\n                                :coupon-id=\"item.id\"\n                                :gotten=\"!!item.is_receive\"\n                                :button=\"{\n                                    name: '领取',\n                                    theme: 'primary',\n                                    disable: !!item.is_available\n                                }\"\n                                @button=\"getCoupon\"\n                            />\n                        </view>\n                        <u-empty\n                            v-if=\"!goodsCouponList.length\"\n                            text=\"暂无优惠券\"\n                            src=\"/static/images/empty/coupon_icon.png\"\n                            :icon-size=\"180\"\n                        />\n                    </scroll-view>\n                </view>\n            </view>\n        </u-popup>\n        <!-- E 优惠券 -->\n\n        <view class=\"nr commission flex\" v-if=\"distribution.is_show && distribution.earnings > 0\">\n            <text class=\"flex-none\">佣金</text>\n            <text class=\"m-l-20\" style=\"color: red\"\n                >{{ Number(distribution.ratio).toFixed(2) }}%</text\n            >\n            <text class=\"m-l-20 muted\">( 预计{{ distribution.earnings }} ) </text>\n            <view style=\"margin-left: auto\">\n                <view @tap=\"showShare = true\">\n                    立即分享\n                    <u-icon name=\"arrow-right\" />\n                </view>\n            </view>\n        </view>\n        <view class=\"specification\">\n            <view\n                class=\"nr specification-item m-b-50\"\n                @click=\"handleSend\"\n                v-if=\"goodsInfo.type == 1\"\n            >\n                <text class=\"muted flex-none\">配送</text>\n                <view class=\"m-l-20\">\n                    <view v-if=\"!goodsInfo.address\">免运费 </view>\n                    <view v-else\n                        >快递：{{ goodsInfo.free_shipping_tips || '以提交订单时为准' }}\n                    </view>\n                    <view class=\"xs muted skuline\" v-if=\"goodsInfo.address\"\n                        >配送至：{{\n                            goodsInfo.address.province +\n                            ' ' +\n                            goodsInfo.address.city +\n                            ' ' +\n                            goodsInfo.address.district\n                        }}\n                    </view>\n                    <view class=\"xs muted skuline\" v-if=\"!goodsInfo.address\">请完善地址信息 </view>\n                </view>\n                <u-icon name=\"arrow-right\" class=\"muted\" style=\"margin-left: auto\" />\n            </view>\n            <!-- S 规格 -->\n            <view class=\"nr specification-item m-b-50\" @click=\"onGoodsOptions\">\n                <text class=\"muted flex-none\">选择</text>\n                <text class=\"m-l-20 skuline\">已选：{{ specValueStr }}</text>\n                <u-icon name=\"arrow-right\" class=\"muted\" style=\"margin-left: auto\" />\n            </view>\n            <view\n                class=\"nr specification-item m-b-42\"\n                @click=\"showSafeguard = true\"\n                v-if=\"goodsInfo.service_guarantee.length\"\n            >\n                <text class=\"muted flex-none m-r-20\">保障</text>\n                <view class=\"skuline\">\n                    <text v-for=\"(item, index) in goodsInfo.service_guarantee\" :key=\"item.id\"\n                        >{{ item.name\n                        }}<text\n                            v-show=\"index != goodsInfo.service_guarantee.length - 1\"\n                            class=\"m-l-10 m-r-10\"\n                            >·</text\n                        ></text\n                    >\n                </view>\n\n                <u-icon name=\"arrow-right\" class=\"muted\" style=\"margin-left: auto\" />\n            </view>\n        </view>\n        <!-- S 保障popup -->\n        <u-popup\n            v-model=\"showSafeguard\"\n            mode=\"bottom\"\n            border-radius=\"14\"\n            :closeable=\"false\"\n            :safe-area-inset-bottom=\"true\"\n            mask-close-able\n        >\n            <view class=\"coupons\">\n                <view class=\"coupons-header\">\n                    <text>保障</text>\n                    <u-icon name=\"close\" color=\"#666666\" @tap=\"showSafeguard = false\" />\n                </view>\n\n                <view class=\"coupons-main\" style=\"background-color: white\">\n                    <scroll-view :scroll-y=\"true\" style=\"height: 700rpx; touch-action: none\">\n                        <view\n                            class=\"coupons-item\"\n                            style=\"margin-bottom: 40rpx\"\n                            v-for=\"(item, index) in goodsInfo.service_guarantee\"\n                            :key=\"item.id\"\n                        >\n                            <view style=\"font-size: 28rpx; font-weight: 500\">{{ item.name }}</view>\n                            <view class=\"muted m-t-10\">{{ item.content }}</view>\n                        </view>\n                    </scroll-view>\n                    <button class=\"popup-btn\" @click=\"showSafeguard = false\">我知道了</button>\n                </view>\n            </view>\n        </u-popup>\n        <!-- E 保障 -->\n        <!-- 规格选择Popup -->\n        <goods-spec\n            v-model=\"showGoodsSpec\"\n            :isNoMarking=\"true\"\n            :defaultInfo=\"{\n                image: goodsInfo.image,\n                price: goodsInfo.sell_price,\n                stock: goodsInfo.total_stock,\n                unit: goodsInfo.unit_name,\n                limit_type: goodsInfo.limit_type,\n                limit_value: goodsInfo.limit_value,\n                buy_num: goodsInfo.buy_num,\n                cart_goods_num: goodsInfo.cart_goods_num\n            }\"\n            @closer=\"showGoodsSpec = false\"\n            :stock_show=\"goodsInfo.stock_show\"\n            :reCheck=\"reCheck\"\n            :cartId=\"cartId\"\n            :buttons=\"specButtonsList\"\n            :spec-list=\"goodsInfo.spec_value\"\n            :spec-map=\"goodsInfo.spec_value_list\"\n            @buy=\"handleBuy\"\n            @cart=\"handleCartAdd\"\n            @change=\"changeGoodsSpec\"\n        />\n        <!-- E 规格 -->\n\n        <!-- diy -->\n        <view v-for=\"(item, index) in pagesData\" :key=\"index\">\n            <template v-if=\"item.name == 'reviews'\">\n                <w-reviews\n                    v-if=\"item.show\"\n                    :content=\"item.content\"\n                    :styles=\"item.styles\"\n                    :comment=\"goodsComment\"\n                    :goods-id=\"goods_id\"\n                />\n            </template>\n            <template v-if=\"item.name == 'goodsrecom'\">\n                <w-goodsrecom v-if=\"item.show\" :content=\"item.content\" :styles=\"item.styles\" />\n            </template>\n        </view>\n\n        <!-- 商品介绍 -->\n        <view class=\"detail\">\n            <view class=\"detail-title nr\">详情</view>\n            <u-parse :html=\"goodsInfo.content\" :show-with-animation=\"true\"></u-parse>\n        </view>\n        <!-- 商品下架提示语 -->\n        <view class=\"goodDown\" v-if=\"!goodsInfo.status\">\n            <view class=\"goodDown-text\">商品已经下架啦~要不要瞧瞧别的~ </view>\n        </view>\n\n        <!-- 功能按钮组 -->\n        <view class=\"functions\">\n            <view class=\"icon-group\">\n                <view class=\"icon-item\" @tap=\"goHome\">\n                    <u-icon name=\"home\" size=\"42\" />\n                    <text style=\"line-height: 32rpx\">首页</text>\n                </view>\n\n                <view class=\"icon-item\" @tap=\"gotoService\">\n                    <u-icon name=\"kefu-ermai\" size=\"42\" />\n                    <text style=\"line-height: 32rpx\">客服</text>\n                </view>\n\n                <view class=\"icon-item\" @tap=\"goCart\">\n                    <u-badge :count=\"cartNum\" :offset=\"[-10, -10]\"></u-badge>\n                    <u-icon name=\"shopping-cart\" size=\"42\" />\n                    <text style=\"line-height: 32rpx\">购物车</text>\n                </view>\n            </view>\n            <view class=\"button-group\">\n                <template v-if=\"goodsInfo.presell\">\n                    <view\n                        class=\"button-item button-item--buy\"\n                        @click=\"onPresell\"\n                        :style=\"{ opacity: goodsInfo.status == 0 ? 0.5 : 1 }\"\n                        >正在预售中，前往参与</view\n                    >\n                </template>\n                <template v-else>\n                    <view\n                        class=\"button-item button-item--cart\"\n                        @click=\"onCart\"\n                        v-if=\"goodsInfo.type == 1\"\n                        :style=\"{ opacity: goodsInfo.status == 0 ? 0.5 : 1 }\"\n                        >加入购物车</view\n                    >\n                    <view\n                        class=\"button-item button-item--buy\"\n                        @click=\"onBuy\"\n                        :style=\"{ opacity: goodsInfo.status == 0 ? 0.5 : 1 }\"\n                        >立即购买</view\n                    >\n                </template>\n            </view>\n        </view>\n\n        <share-popup\n            v-model=\"showShare\"\n            :share-id=\"goods_id\"\n            pagePath=\"pages/goods_detail/goods_detail\"\n            :type=\"1\"\n            :poster_img=\"goodsInfo.poster\"\n            :config=\"{\n                name: goodsInfo.name,\n                image: goodsInfo.image\n            }\"\n        />\n        <!-- 页面状态 -->\n        <page-status :status=\"pageStatus\">\n            <template #error>\n                <u-empty\n                    :text=\"pageErrorMsg\"\n                    src=\"/static/images/empty/shop.png\"\n                    :icon-size=\"280\"\n                ></u-empty>\n            </template>\n        </page-status>\n        <u-back-top\n            :scroll-top=\"scrollTop\"\n            :top=\"1000\"\n            :customStyle=\"{\n                backgroundColor: '#FFF',\n                color: '#000',\n                boxShadow: '0px 3px 6px rgba(0, 0, 0, 0.1)'\n            }\"\n        >\n        </u-back-top>\n    </view>\n</template>\n\n<script>\nimport { apiGoodsDetail } from '@/api/goods'\nimport { apiCartAdd, apiCouponGet, apiCartNum } from '@/api/store'\nimport { apiGoodsCollect, apiGoodsMarketing, apicheckCanBuy } from '@/api/goods'\nimport { baseURL, basePath } from '@/config/app'\nimport { apiGetPage } from '@/api/store'\nimport { PageStatusEnum, OrderTypeEnum } from '@/utils/enum'\nimport { mapGetters, mapState } from 'vuex'\nimport { strToParams } from '@/utils/tools'\nimport { apiAddressLists } from '@/api/user'\nimport { apiserviceConfig } from '@/api/app'\nimport ServiceMixin from '@/mixins/service'\n\nexport default {\n    name: 'GoodsDetail',\n    mixins: [ServiceMixin],\n\n    data() {\n        return {\n            serciveConfig: {},\n            addressId: '',\n            addressList: [],\n            isDischarge: false,\n            // 页面状态\n            pageStatus: PageStatusEnum['LOADING'],\n            pagesData: [],\n            pageErrorMsg: '', // 页面异常信息\n            scrollTop: 0,\n            percent: 0,\n            showShare: false,\n            goodsInfo: {\n                free_shipping_tips: '',\n                service_guarantee: [],\n                member_level: {},\n                address: {},\n                stock_show: true\n            }, // 商品信息\n            goodsComment: {}, // 用户评价\n            goods_id: '', // 商品ID\n            showSafeguard: false, //保障 ：显示｜隐藏\n            isGoodsCollect: false, // 商品收藏\n\n            showGoodsSpec: false, // 商品规格: 显示 | 隐藏\n            showCoupons: false, // 领券：显示 | 隐藏\n\n            goodsSpecOptions: {\n                spec: {}\n            }, // 已选商品规格\n            specButtonsList: [], // 规格按钮\n            goodsCouponList: [], // 优惠券列表\n\n            goodsCouponActive: '', // 使用的优惠券\n            // 规格按钮组\n            specButtonsGroups: {\n                buy: {\n                    event: 'buy',\n                    text: '立即购买'\n                },\n                cart: {\n                    event: 'cart',\n                    text: '加入购物车'\n                }\n            },\n            distribution: {},\n            reCheck: 0, //标识购物车内重选\n            cartId: 0\n        }\n    },\n\n    computed: {\n        ...mapGetters(['isLogin', 'ServiceConfig', 'userInfo', 'appConfig', 'shareConfig']),\n\n        ...mapState({\n            cartNum: (state) => state.cart.cartNum\n        }),\n        // 根据端获取客服配置\n        // getSerciveConfig() {\n\n        //     console.log(this.serciveConfig[serviceEnum[getClient()]], 'service')\n        //     return this.serciveConfig[serviceEnum[getClient()]]\n        // },\n        // 优惠券【视图】\n        goodsCouponSpecs() {\n            // 展示数量\n            const COUNT = 2\n            const coupons = this.goodsCouponList\n            // 优惠券列表数量\n            const Len = coupons.length\n            // 承载容器\n            const payload = []\n\n            for (let i = 0; i < COUNT && i <= Len - 1; ++i) {\n                const value = coupons[i]\n                payload.push(value)\n            }\n\n            return payload\n        },\n\n        // 已选商品规格\n        specValueStr() {\n            return this.goodsSpecOptions?.spec?.spec_value_str ?? ''\n        },\n\n        // 优惠券小数处理\n        handleSpot() {\n            return (val) => {\n                let result = val\n                let decimalsArr = val.split('.')\n                if (decimalsArr[1] == '00') {\n                    result = decimalsArr[0] //5.00形式=>5\n                } else if (decimalsArr[1] != '00' && decimalsArr[1] % 10 == 0) {\n                    result = decimalsArr[0] + decimalsArr[1].substr(0, decimalsArr[1].length - 1) //5.10形式=>5.1\n                }\n                return result\n            }\n        }\n    },\n\n    methods: {\n        gotoService() {\n            this.$Router.push({\n                path: '/bundle/pages/artificial_service/artificial_service'\n            })\n        },\n        //预售\n        onPresell() {\n            this.$Router.push({\n                path: '/bundle/pages/presell_detail/presell_detail',\n                query: {\n                    id: this.goods_id\n                }\n            })\n        },\n        // 获取地址列表\n        apiAddressListsFun() {\n            apiAddressLists().then((res) => {\n                this.addressList = res\n                console.log(res)\n            })\n        },\n        // 获取装修页面\n        getPage() {\n            apiGetPage({\n                type: 5,\n                goods_id: this.goods_id\n            }).then((data) => {\n                const { common, content } = data\n\n                this.pagesData = content\n                uni.setNavigationBarTitle({\n                    title: common.title\n                })\n            })\n        },\n        // 更改规格\n        changeGoodsSpec(options) {\n            this.goodsSpecOptions = options\n            console.log(options)\n        },\n\n        // 点击加入购物车按钮\n        onCart() {\n            //判断商品下架\n            if (this.goodsInfo.status == 0) return\n            this.showGoodsSpec = true\n            this.specButtonsList = [this.specButtonsGroups.cart]\n        },\n\n        // 更改商品收藏状态\n        changeCollect(value) {\n            value = !!value ? 0 : 1\n            if (!this.isLogin) return this.$Router.push('/pages/login/login')\n\n            apiGoodsCollect({\n                goods_id: this.goods_id,\n                is_collect: value\n            })\n                .then((data) => {\n                    this.isGoodsCollect = value\n                })\n                .catch((err) => {\n                    console.log(err)\n                })\n        },\n\n        goHome() {\n            this.$Router.replaceAll({\n                path: '/pages/index/index'\n            })\n        },\n        // 去购物车\n        goCart() {\n            this.$Router.replaceAll({\n                path: '/pages/shop_cart/shop_cart'\n            })\n        },\n\n        // 点击立即购买按钮\n        onBuy() {\n            // 判断商品下架\n            if (this.goodsInfo.status == 0) return\n            this.showGoodsSpec = true\n            this.specButtonsList = [this.specButtonsGroups.buy]\n        },\n\n        // 领取优惠券\n        getCoupon(id) {\n            if (!this.isLogin) return this.$Router.push('/pages/login/login')\n\n            apiCouponGet({\n                id\n            })\n                .then(() => {\n                    this.$toast({\n                        title: '领取成功'\n                    })\n                    this.initMarketing()\n                })\n                .catch((err) => {\n                    console.log(err)\n                    // this.$toast({ title: '' })\n                })\n        },\n\n        // 点击已选规格\n        onGoodsOptions() {\n            this.showGoodsSpec = true\n            this.specButtonsList = [this.specButtonsGroups.buy]\n\n            if (this.goodsInfo.type == 1) {\n                this.specButtonsList = [\n                    {\n                        ...this.specButtonsGroups.cart,\n                        style: {\n                            border: `solid 1px ${this.themeColor}`,\n                            color: this.themeColor,\n                            backgroundColor: '#FFFFFF'\n                        }\n                    },\n                    this.specButtonsGroups.buy\n                ]\n            }\n        },\n\n        // 处理 加入购物车\n        handleCartAdd({ spec, number }) {\n            if (!this.isLogin) return this.$Router.push('/pages/login/login')\n\n            apiCartAdd({\n                item_id: spec.id,\n                goods_num: number\n            })\n                .then(() => {\n                    this.$toast({\n                        title: '已加入购物车'\n                    })\n                    this.$store.dispatch('getCartNum')\n                    // 商品详情数据\n                    this.initGoodsDetail()\n                })\n                .catch((err) => {\n                    throw new Error(err)\n                })\n        },\n\n        // 处理 立即购买\n        handleBuy({ spec, number }) {\n            const form = this.goodsInfo.type == 1 ? 'GOODS' : 'VIRTUAL'\n            this.$Router.push({\n                path: '/pages/goods_order/goods_order',\n                query: {\n                    from: OrderTypeEnum[form],\n                    address_id: this.addressId,\n                    payload: {\n                        source: 'buy_now',\n                        goods: [\n                            {\n                                goods_num: number,\n                                item_id: spec.id\n                            }\n                        ]\n                    }\n                }\n            })\n        },\n\n        // 初始化商品详情数据\n        initGoodsDetail() {\n            return new Promise((resolve, reject) => {\n                apiGoodsDetail({\n                    id: this.goods_id,\n                    visit: 1,\n                    address_id: this.addressId\n                })\n                    .then((data) => {\n                        this.goodsInfo = data\n                        const hasComment = JSON.stringify(data.goods_comment) !== '[]'\n                        this.goodsComment = hasComment ? data.goods_comment : {}\n                        this.isGoodsCollect = !!data.is_collect\n                        this.distribution = this.goodsInfo.distribution\n                        return data\n                    })\n                    .then((data) => {\n                        // #ifdef H5\n                        // 设置分享\n                        this.$store.dispatch('setWxShare', {\n                            shareImage: data?.image,\n                            shareDesc: data?.name\n                        })\n                        // #endif\n                        resolve(data)\n                    })\n                    .catch((err) => {\n                        reject(err)\n                    })\n            })\n        },\n        async getServiceConfig() {\n            const data = await apiserviceConfig()\n            this.serciveConfig = data\n        },\n        // 初始化优惠券\n        initMarketing() {\n            return new Promise((resolve, reject) => {\n                apiGoodsMarketing({\n                    id: this.goods_id\n                })\n                    .then((data) => {\n                        this.goodsCouponList = data.coupon\n                        resolve(data)\n                    })\n                    .catch((err) => {\n                        reject(err)\n                    })\n            })\n        },\n        handleSend() {\n            uni.$once('changeAddress', async (id) => {\n                this.addressId = id\n                await this.initGoodsDetail()\n            })\n            this.$Router.push({\n                path: '/pages/address/address',\n                query: {\n                    type: 1\n                }\n            })\n        }\n    },\n    onPageScroll(e) {\n        const top = uni.upx2px(100)\n        const { scrollTop } = e\n        this.percent = scrollTop / top > 1 ? 1 : scrollTop / top\n        this.scrollTop = scrollTop\n    },\n    async onLoad() {\n        const options = this.$Route.query\n        //重选规格\n        if (options['reCheck'] == 1) {\n            //标识购物车购物车内多规格库存不足重选\n            ;(this.reCheck = options['reCheck']), (this.cartId = options['cart_id'])\n            setTimeout(() => {\n                this.showGoodsSpec = true\n            }, 200)\n        }\n\n        // 商品ID赋值：点击 | 扫码\n        options['scene']\n            ? (this.goods_id = strToParams(options['scene'])['id'])\n            : (this.goods_id = options.id)\n\n        try {\n            if (!this.goods_id) throw new Error('该商品不存在')\n            await this.getPage()\n            // 商品详情数据\n            await this.initGoodsDetail()\n            await this.apiAddressListsFun()\n            // 促销\n            await this.initMarketing()\n            this.getServiceConfig()\n            this.pageStatus = PageStatusEnum['NORMAL']\n        } catch (err) {\n            console.log(err)\n            this.pageErrorMsg = err.message\n            this.pageStatus = PageStatusEnum['ERROR']\n        }\n        // #ifdef H5\n        setTimeout(() => {\n            const shareconfig = this.shareConfig.find((i) => {\n                return i.type == 2 && i.page == 2\n            })\n            const titile = shareconfig.title\n                .replace(/\\{goodname\\}/g, this.goodsInfo.name)\n                .replace(/\\{price\\}/g, this.goodsInfo.sell_price)\n            const sharedesc = shareconfig.synopsis\n                .replace(/\\{goodname\\}/g, this.goodsInfo.name)\n                .replace(/\\{price\\}/g, this.goodsInfo.sell_price)\n            // 设置分享\n            this.$store.dispatch('setWxShare', {\n                shareTitle: titile,\n                shareImage: shareconfig.image,\n                shareDesc: sharedesc\n            })\n        }, 1000)\n\n        // #endif\n    },\n\n    onShareAppMessage() {\n        const { name, image } = this.goodsInfo\n        return {\n            title: name,\n            path: `/pages/goods_detail/goods_detail?id=${this.goods_id}&invite_code=${this.userInfo.code}`,\n            imageUrl: image\n        }\n    },\n    onHide() {\n        this.isDischarge = true\n    },\n    async onShow() {\n        // await this.getPage();\n        // 商品详情数据\n        // await this.initGoodsDetail();\n        // await this.apiAddressListsFun();\n        // await this.initMarketing();\n\n        this.isDischarge = false\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.button {\n    padding: 0 !important;\n}\n.goods-detail {\n    padding-bottom: calc(100rpx + 100rpx + constant(safe-area-inset-bottom));\n    padding-bottom: calc(100rpx + 100rpx + env(safe-area-inset-bottom));\n    .goods-stock {\n        margin: 1rpx 20rpx 30rpx 20rpx;\n        background-color: #ffffff;\n        padding: 20rpx 24rpx;\n        border-radius: 0rpx 0rpx 30rpx 30rpx;\n    }\n}\n\n.goods-info {\n    margin: 0 20rpx 0 20rpx;\n    padding: 20rpx 24rpx;\n    background-color: #ffffff;\n    border-radius: 30rpx 30rpx 0 0;\n\n    // 会员价\n    .vip-price {\n        margin-left: 20rpx;\n        margin-top: 5rpx;\n        background-color: #ffe9ba;\n        color: #ffd4b7;\n        line-height: 36rpx;\n        border-radius: 6rpx;\n        overflow: hidden;\n\n        .price-name {\n            background-color: #101010;\n            padding: 3rpx 12rpx;\n            position: relative;\n            overflow: hidden;\n\n            &::after {\n                content: '';\n                display: block;\n                width: 20rpx;\n                height: 20rpx;\n                position: absolute;\n                right: -15rpx;\n                background-color: #ffe9ba;\n                border-radius: 50%;\n                top: 50%;\n                transform: translateY(-50%);\n                box-sizing: border-box;\n            }\n        }\n    }\n\n    .share {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 134rpx;\n        height: 60rpx;\n        margin-right: -24rpx;\n        border-radius: 30px 0 0 30px;\n        background-color: #f6f6f6;\n    }\n    .goods-main {\n        display: flex;\n        justify-content: space-between;\n        padding: 20rpx 0 10rpx 0;\n\n        .goods-name {\n            font-weight: 500;\n        }\n        .goods-items {\n            flex-shrink: 0;\n            width: 150rpx;\n            display: flex;\n            justify-content: flex-end;\n\n            .goods-item {\n                font-size: 28rpx;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                margin-left: 20rpx;\n            }\n        }\n    }\n}\n\n.discounts {\n    display: flex;\n    padding: 20rpx 0 10rpx 0;\n    // margin-top: 20rpx;\n    background-color: #ffffff;\n\n    .coupon-tag {\n        box-sizing: border-box;\n        position: relative;\n        display: flex;\n        justify-content: center;\n        min-width: 140rpx;\n        height: 36rpx;\n        padding: 0 20rpx;\n        border-radius: 4px;\n        margin-right: 10rpx;\n        color: #ffffff;\n\n        @include background_color();\n        &::before,\n        &::after {\n            position: absolute;\n            top: 50%;\n            transform: translateY(-50%);\n            display: block;\n            content: '';\n            width: 10rpx;\n            height: 10rpx;\n            border-radius: 50%;\n            background-color: #ffffff;\n        }\n\n        &::before {\n            right: -5rpx;\n        }\n\n        &::after {\n            left: -5rpx;\n        }\n    }\n}\n\n.specification {\n    padding: 50rpx 24rpx 1rpx 24rpx;\n    border-radius: 30rpx;\n    margin: 0rpx 20rpx 30rpx 20rpx;\n\n    background-color: #ffffff;\n    .specification-item {\n        display: flex;\n    }\n}\n\n.detail {\n    padding: 24rpx;\n    margin-top: 20rpx;\n    background-color: #ffffff;\n    margin-left: 20rpx;\n    margin-right: 20rpx;\n    border-radius: 30rpx;\n\n    &-title {\n        padding-bottom: 24rpx;\n    }\n\n    ::v-deep image {\n        vertical-align: top;\n    }\n\n    // #ifdef H5\n    ::v-deep img {\n        vertical-align: top;\n        display: inline;\n    }\n\n    // #endif\n    // #ifdef MP-WEIXIN || APP-PLUS\n    ::v-deep ._img {\n        vertical-align: top;\n        display: inline;\n    }\n\n    // #endif\n}\n\n.functions {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    align-items: center;\n    height: calc(100rpx + constant(safe-area-inset-bottom));\n    height: calc(100rpx + env(safe-area-inset-bottom));\n    padding: 0 24rpx constant(safe-area-inset-bottom) 24rpx;\n    padding: 0 24rpx env(safe-area-inset-bottom) 24rpx;\n    border-top: $-solid-border;\n    background-color: #ffffff;\n\n    .icon-group {\n        display: flex;\n        justify-content: space-around;\n        width: 268rpx;\n        font-size: $-font-size-xxs;\n        color: $-color-lighter;\n\n        .icon-item {\n            position: relative;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n        }\n    }\n\n    .button-group {\n        flex: 1;\n        display: flex;\n        justify-content: space-between;\n\n        .button-item {\n            flex: 1;\n            box-sizing: border-box;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 74rpx;\n            margin-left: 14rpx;\n            border-radius: 60px;\n\n            &--cart {\n                @include font_color();\n                @include border_color();\n\n                border-width: 1px;\n                border-style: solid;\n            }\n\n            &--buy {\n                @include background_color();\n\n                color: #ffffff;\n            }\n        }\n    }\n}\n\n.coupons {\n    background-color: #f6f6f6;\n\n    &-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: 100rpx;\n        padding: 0 30rpx;\n        font-weight: 500;\n        font-size: $-font-size-md;\n        background-color: #ffffff;\n    }\n\n    &-main {\n        padding: 20rpx;\n\n        .coupons-item {\n            &:nth-child(n + 2) {\n                margin-top: 20rpx;\n            }\n        }\n    }\n    .popup-btn {\n        @include background_color();\n        color: white;\n        height: 80rpx;\n        line-height: 80rpx;\n        border-radius: 50rpx;\n        font-size: 32rpx;\n        margin-top: 25rpx;\n    }\n}\n.share-money {\n    border-radius: 8rpx;\n    padding: 8rpx 16rpx;\n    color: #7b3e0e;\n    background: linear-gradient(90deg, #fdeed8 0%, #fccf9c 100%);\n}\n.goodDown {\n    position: fixed;\n    bottom: calc(100rpx + env(safe-area-inset-bottom));\n    bottom: calc(100rpx + constant(safe-area-inset-bottom));\n    height: 88rpx;\n    left: 0;\n    right: 0;\n    background-color: rgba(119, 119, 119, 1);\n    &-text {\n        line-height: 88rpx;\n        text-align: center;\n        color: white;\n    }\n}\n.commission {\n    margin: 0rpx 20rpx 30rpx 20rpx;\n    padding: 40rpx 24rpx;\n    background-color: #ffffff;\n    border-radius: 30rpx;\n}\n.info-header {\n    background-size: contain;\n    height: 240rpx;\n    padding: 30rpx 24rpx;\n    .vip-name {\n        font-size: 24rpx;\n        background-color: #e0a356;\n        width: 150rpx;\n        border-radius: 25rpx;\n        text-align: center;\n        line-height: 30rpx;\n        padding: 5rpx 0;\n        margin-bottom: 10rpx;\n        position: relative;\n        &::before {\n            position: absolute;\n            content: '';\n            top: -7rpx;\n            right: 10rpx;\n            width: 0;\n            height: 0;\n            border-top: 50px solid #e0a356;\n            border-right: 50px solid transparent;\n            border-left: 50px solid transparent;\n            transform: scale(0.15);\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=style&index=0&id=706a1a46&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=style&index=0&id=706a1a46&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1734803007658\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
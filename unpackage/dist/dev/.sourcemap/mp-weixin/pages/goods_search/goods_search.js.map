{"version":3,"sources":["uni-app:///main.js","webpack:////Users/lisicheng/project/lijian/pages/goods_search/goods_search.vue?6110","webpack:////Users/lisicheng/project/lijian/pages/goods_search/goods_search.vue?97c3","webpack:////Users/lisicheng/project/lijian/pages/goods_search/goods_search.vue?65d7","webpack:////Users/lisicheng/project/lijian/pages/goods_search/goods_search.vue?36b4","uni-app:///pages/goods_search/goods_search.vue","webpack:////Users/lisicheng/project/lijian/pages/goods_search/goods_search.vue?1f55","webpack:////Users/lisicheng/project/lijian/pages/goods_search/goods_search.vue?c2f7"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","mixins","data","showScreen","goodsList","goodsSearchHistory","goodsSearchHistoryLoading","searchStatus","goodsCardStyle","search","is_member_price","max_price","min_price","category_id","price","sale","brand_id","brandLists","vipLists","value","methods","mescrollInit","downCallback","upCallback","page_no","page_size","then","count","catch","goGoodsDetail","path","query","id","focusSearch","handleSearch","console","handlemenber","onSearchHistoryClear","uni","title","content","confirmColor","success","handSortOptions","getSortReverse","initSearchHistoryData","finally","getSearchList","handleScreen","handleConfirm","handleReset","onLoad"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACsC;;;AAGjG;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,qPAEN;AACP,KAAK;AACL;AACA,aAAa,wOAEN;AACP,KAAK;AACL;AACA,aAAa,2PAEN;AACP,KAAK;AACL;AACA,aAAa,+LAEN;AACP,KAAK;AACL;AACA,aAAa,qMAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,aAAa,qSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClGA;AAAA;AAAA;AAAA;AAA2zB,CAAgB,0yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACiN/0B;AAEA;AAAA;AAAA;AAAA,eAEA;EACAC;EACAC;EAEAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;QACAC;QACAC;QACAC;QACAZ;QAAA;QACAa;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;MACA;;MACA;MACAC;MACAC,WACA;QAAAlB;QAAAmB;MAAA,GACA;QAAAnB;QAAAmB;MAAA;IAEA;EACA;EAEAC;IACA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;MAEA;MACA;MAEA,0DACA;QACAC;QACAC;MAAA,GACA,CACAC;QAAA;UAAAD;UAAAE;QACA;QACA;QACA;QACA;QACA;QACA;MACA,GACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;QACAC;QACAC;UACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACAD;MAEA;IACA;IACA;IACAE;MAAA;MACAC;QACAC;QACAC;QACAC;QACAC;UAAA;UACA;UACA,oCACAhB;YACA;UACA,GACAE;YACA;cACAW;YACA;UACA;QACA;MACA;IACA;IAEA;IACAI;MACA;QACA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;MAAA;MAEA;MACA;IACA;IAEA;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;UACA;MAAA;IAEA;IAEA;IACAC;MAAA;MACA,+BACAnB;QACA;MACA,GACAE;QACA;UACAW;QACA;QACA;MACA,GACAO;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACAtB;MACA;QACA;MACA;IACA;IACA;IACAuB;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MAEA;MACA;IACA;EACA;EAEAC;IACA;IACA;MACA,gBACA,qDACA;MACA;IACA;IACA;IACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACpaA;AAAA;AAAA;AAAA;AAAsiD,CAAgB,i8CAAG,EAAC,C;;;;;;;;;;;ACA1jD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/goods_search/goods_search.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/goods_search/goods_search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods_search.vue?vue&type=template&id=6add0fa6&scoped=true&\"\nvar renderjs\nimport script from \"./goods_search.vue?vue&type=script&lang=js&\"\nexport * from \"./goods_search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods_search.vue?vue&type=style&index=0&id=6add0fa6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6add0fa6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/goods_search/goods_search.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_search.vue?vue&type=template&id=6add0fa6&scoped=true&\"","var components\ntry {\n  components = {\n    uSticky: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-sticky/u-sticky\" */ \"@/components/uview-ui/components/u-sticky/u-sticky.vue\"\n      )\n    },\n    uSearch: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-search/u-search\" */ \"@/components/uview-ui/components/u-search/u-search.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-icon/u-icon\" */ \"@/components/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uLoading: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-loading/u-loading\" */ \"@/components/uview-ui/components/u-loading/u-loading.vue\"\n      )\n    },\n    sortIcon: function () {\n      return import(\n        /* webpackChunkName: \"components/sort-icon/sort-icon\" */ \"@/components/sort-icon/sort-icon.vue\"\n      )\n    },\n    goodsCard: function () {\n      return import(\n        /* webpackChunkName: \"components/goods-card/goods-card\" */ \"@/components/goods-card/goods-card.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-popup/u-popup\" */ \"@/components/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-input/u-input\" */ \"@/components/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !_vm.goodsSearchHistoryLoading ? _vm.goodsSearchHistory.length : null\n  var a0 = {\n    auto: true,\n    noMoreSize: 10,\n    empty: {\n      icon: \"/static/images/empty/shop.png\",\n      tip: \"没有找到商品~\",\n      fixed: true,\n    },\n  }\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.goodsCardStyle = \"square\"\n    }\n    _vm.e1 = function ($event) {\n      _vm.goodsCardStyle = \"rectangle\"\n    }\n    _vm.e2 = function ($event) {\n      _vm.showScreen = true\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        a0: a0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_search.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"search-container\" :class=\"themeName\">\n        <u-sticky offset-top=\"0\" h5-nav-height=\"0\">\n            <!-- 搜索 -->\n            <view class=\"search-input\">\n                <u-search\n                    class=\"flex-1\"\n                    v-model=\"search.name\"\n                    height=\"72\"\n                    bg-color=\"#F4F4F4\"\n                    :show-action=\"false\"\n                    placeholder=\"请输入要搜索的商品\"\n                    @focus=\"focusSearch\"\n                    @search=\"handleSearch\"\n                    :focus=\"!searchStatus\"\n                />\n\n                <view class=\"search-action\" @tap=\"handleSearch(search.name)\"> 搜索 </view>\n            </view>\n        </u-sticky>\n\n        <!-- 搜索 -->\n        <view v-show=\"!searchStatus\" class=\"search-options-container\">\n            <view class=\"search-options\">\n                <view class=\"search-options-header\">\n                    <text>历史搜索</text>\n                    <u-icon name=\"trash\" @tap=\"onSearchHistoryClear\" />\n                </view>\n\n                <view class=\"flex row-center\">\n                    <u-loading mode=\"circle\" :show=\"goodsSearchHistoryLoading\" />\n                </view>\n                <template v-if=\"!goodsSearchHistoryLoading\">\n                    <view v-if=\"goodsSearchHistory.length\" class=\"search-options-main\">\n                        <view\n                            class=\"search-options-item\"\n                            v-for=\"(item, index) in goodsSearchHistory\"\n                            :key=\"index\"\n                            @tap=\"handleSearch(item)\"\n                            >{{ item }}</view\n                        >\n                    </view>\n                    <view v-else class=\"flex row-center muted\">暂无记录</view>\n                </template>\n            </view>\n        </view>\n\n        <!-- 搜索结果 -->\n        <view v-show=\"searchStatus\">\n            <!-- 排序方式 -->\n            <view class=\"sort\">\n                <!-- 综合 -->\n                <view\n                    :class=\"['sort-item', { 'sort-item--active': !search.price && !search.sale }]\"\n                    @tap=\"handSortOptions('all')\"\n                >\n                    <text>综合</text>\n                </view>\n                <!-- 价格 -->\n                <view\n                    :class=\"['sort-item', { 'sort-item--active': search.price }]\"\n                    @tap=\"handSortOptions('price')\"\n                >\n                    <text>价格</text>\n                    <sort-icon class=\"m-l-10\" :status=\"search.price\" :active-color=\"themeColor\" />\n                </view>\n                <!-- 销量 -->\n                <view\n                    :class=\"['sort-item', { 'sort-item--active': search.sale }]\"\n                    @tap=\"handSortOptions('sale')\"\n                >\n                    <text>销量</text>\n                    <sort-icon class=\"m-l-10\" :status=\"search.sale\" :active-color=\"themeColor\" />\n                </view>\n                <!-- 商品卡片样式 -->\n                <view class=\"search-action\">\n                    <view v-show=\"goodsCardStyle === 'rectangle'\" @tap=\"goodsCardStyle = 'square'\">\n                        <u-icon name=\"grid\" size=\"38\" />\n                    </view>\n                    <view v-show=\"goodsCardStyle === 'square'\" @tap=\"goodsCardStyle = 'rectangle'\">\n                        <u-icon name=\"list-dot\" size=\"38\" />\n                    </view>\n                </view>\n                <view\n                    :class=\"['sort-item', { 'sort-item--active': search.sale }]\"\n                    @tap=\"showScreen = true\"\n                >\n                    <text>筛选</text>\n                </view>\n            </view>\n\n            <!-- 商品列表 -->\n            <mescroll-body\n                ref=\"mescrollRef\"\n                :up=\"{\n                    auto: true,\n                    noMoreSize: 10,\n                    empty: {\n                        icon: '/static/images/empty/shop.png',\n                        tip: '没有找到商品~',\n                        fixed: true\n                    }\n                }\"\n                @init=\"mescrollInit\"\n                @down=\"downCallback\"\n                @up=\"upCallback\"\n            >\n                <view :class=\"['goods-container', `goods-container-${goodsCardStyle}`]\">\n                    <goods-card\n                        v-for=\"item in goodsList\"\n                        :key=\"item.id\"\n                        :shape=\"goodsCardStyle\"\n                        class=\"goods-item\"\n                        :name=\"item.name\"\n                        :image=\"item.image\"\n                        :price=\"item.sell_price\"\n                        :minPrice=\"item.lineation_price\"\n                        @click.native=\"goGoodsDetail(item.id)\"\n                    />\n                </view>\n            </mescroll-body>\n        </view>\n        <u-popup\n            class=\"screen-popup\"\n            v-model=\"showScreen\"\n            mode=\"bottom\"\n            :border-radius=\"30\"\n            safe-area-inset-bottom\n        >\n            <view style=\"height: 100%\" class=\"flex-col\">\n                <view class=\"bold text-center lg p-20\">筛选</view>\n                <view class=\"screen-content\">\n                    <scroll-view style=\"height: 800rpx\" scroll-y=\"true\">\n                        <view class=\"screen-item\">\n                            <view class=\"bold\">会员价</view>\n                            <view class=\"brand-list flex flex-wrap m-t-30\">\n                                <view\n                                    class=\"brand-item m-b-20 line-1\"\n                                    :class=\"{\n                                        active: item.value === search.is_member_price\n                                    }\"\n                                    v-for=\"item in vipLists\"\n                                    :key=\"item\"\n                                    @click=\"handlemenber(item.value)\"\n                                >\n                                    {{ item.name }}\n                                </view>\n                            </view>\n                        </view>\n                        <view class=\"screen-item\">\n                            <view class=\"bold\">价格区间</view>\n                            <view class=\"brand-list flex flex-wrap m-t-30\">\n                                <view class=\"price-item m-b-20 line-1\">\n                                    <u-input\n                                        v-model=\"search.min_price\"\n                                        input-align=\"center\"\n                                        type=\"number\"\n                                        placeholder=\"最低价\"\n                                        :clearable=\"false\"\n                                    />\n                                </view>\n                                <view class=\"m-b-20 m-r-20 m-l-20\">——</view>\n                                <view class=\"price-item m-b-20 line-1\">\n                                    <u-input\n                                        v-model=\"search.max_price\"\n                                        input-align=\"center\"\n                                        type=\"number\"\n                                        placeholder=\"最高价\"\n                                        :clearable=\"false\"\n                                /></view>\n                            </view>\n                        </view>\n                        <view class=\"screen-item\">\n                            <view class=\"bold\">品牌</view>\n                            <view class=\"brand-list flex flex-wrap m-t-30\">\n                                <view\n                                    class=\"brand-item m-b-20 line-1\"\n                                    :class=\"{\n                                        active: item.id == search.brand_id\n                                    }\"\n                                    v-for=\"(item, index) in brandLists\"\n                                    :key=\"index\"\n                                    @tap=\"handleScreen(item)\"\n                                >\n                                    {{ item.name }}\n                                </view>\n                            </view>\n                        </view>\n                    </scroll-view>\n                </view>\n                <view class=\"screen-footer flex-1 flex\">\n                    <button hover-class=\"none\" class=\"btn btn--reset\" size=\"md\" @tap=\"handleReset\">\n                        重置\n                    </button>\n                    <button\n                        hover-class=\"none\"\n                        class=\"btn btn--confirm\"\n                        size=\"md\"\n                        @tap=\"handleConfirm\"\n                    >\n                        确定\n                    </button>\n                </view>\n            </view>\n        </u-popup>\n    </view>\n</template>\n\n<script>\nimport { apiGoodsLists, apiBrandLists } from '@/api/goods'\nimport { apiSearchHistory, apiSearchHistoryClear } from '@/api/goods'\nimport MescrollMixin from '@/components/mescroll-uni/mescroll-mixins'\n\nexport default {\n    name: 'Search',\n    mixins: [MescrollMixin],\n\n    data() {\n        return {\n            showScreen: false,\n            goodsList: [], // 商品列表\n            goodsSearchHistory: [], // 商品搜索记录\n            goodsSearchHistoryLoading: true, // 搜索记录请求状态loading\n            searchStatus: false, // 搜索状态\n            goodsCardStyle: 'square', // 商品卡片样式: square -正方形; rectangle -长方形\n            search: {\n                is_member_price: '',\n                max_price: '',\n                min_price: '',\n                name: '', // 商品名称\n                category_id: '', // 分类\n                price: '', // 价格排序: desc-降序; asc-升序;\n                sale: '', // 销量排序: desc-降序; asc-升序;\n                brand_id: '' //品牌\n            },\n            // 品牌列表\n            brandLists: [],\n            vipLists: [\n                { name: '参与', value: 1 },\n                { name: '不参与', value: 0 }\n            ]\n        }\n    },\n\n    methods: {\n        // 初始化Mescroll\n        mescrollInit(mescroll) {\n            // console.log(mescroll);\n            this.mescroll = mescroll\n        },\n\n        // 下拉刷新\n        downCallback() {\n            this.mescroll.resetUpScroll()\n        },\n\n        // 上拉加载更多\n        upCallback(page) {\n            if (!this.searchStatus) return\n\n            const pageNum = page.num\n            const pageSize = page.size\n\n            apiGoodsLists({\n                ...this.search,\n                page_no: pageNum,\n                page_size: pageSize\n            })\n                .then(({ lists, page_size, count }) => {\n                    // 如果是第一页需手动置空列表\n                    if (page.num == 1) this.goodsList = []\n                    // 重置列表数据\n                    this.goodsList = [...this.goodsList, ...lists]\n                    // this.mescroll.endBySize(page_size, count)\n                    this.mescroll.endSuccess(lists.length, count)\n                })\n                .catch(() => {\n                    this.mescroll.endErr()\n                })\n        },\n\n        // 跳转商品详情\n        goGoodsDetail(id) {\n            this.$Router.push({\n                path: '/pages/goods_detail/goods_detail',\n                query: {\n                    id\n                }\n            })\n        },\n\n        // 聚焦搜索\n        focusSearch() {\n            // this.searchStatus = false;\n            this.initSearchHistoryData()\n        },\n\n        // 搜索\n        handleSearch(value) {\n            console.log(123456)\n            this.searchStatus = true\n            this.$set(this.search, 'name', value)\n            this.mescroll && this.mescroll.resetUpScroll()\n        },\n        //是否参与会员价\n        handlemenber(val) {\n            console.log(123456, val)\n\n            this.search.is_member_price = val\n        },\n        // 清空搜索记录\n        onSearchHistoryClear() {\n            uni.showModal({\n                title: '温馨提示',\n                content: '是否清空搜索记录?',\n                confirmColor: this.themeColor,\n                success: ({ confirm }) => {\n                    if (!confirm) return\n                    apiSearchHistoryClear()\n                        .then(() => {\n                            this.initSearchHistoryData()\n                        })\n                        .catch(() => {\n                            this.$toast({\n                                title: '操作失败'\n                            })\n                        })\n                }\n            })\n        },\n\n        // 排序方式\n        handSortOptions(type) {\n            switch (type) {\n                case 'all':\n                    this.$set(this.search, 'sale', '')\n                    this.$set(this.search, 'price', '')\n                    break\n                case 'sale':\n                    this.$set(this.search, 'price', '')\n                    this.$set(this.search, 'sale', this.getSortReverse(this.search.sale))\n                    break\n                case 'price':\n                    this.$set(this.search, 'sale', '')\n                    this.$set(this.search, 'price', this.getSortReverse(this.search.price))\n                    break\n            }\n            // 重载数据\n            this.mescroll.resetUpScroll()\n        },\n\n        // 获取反向排序\n        getSortReverse(sort) {\n            switch (sort) {\n                case 'asc':\n                    return 'desc'\n                case 'desc':\n                    return 'asc'\n                default:\n                    return 'desc'\n            }\n        },\n\n        // 初始化搜索记录数据\n        initSearchHistoryData() {\n            apiSearchHistory()\n                .then((data) => {\n                    this.goodsSearchHistory = data\n                })\n                .catch((err) => {\n                    this.$toast({\n                        title: '搜索记录获取失败'\n                    })\n                    throw new Error(err)\n                })\n                .finally(() => {\n                    this.goodsSearchHistoryLoading = false\n                })\n        },\n        //筛选条件\n        getSearchList() {\n            apiBrandLists({\n                page_size: 999\n            }).then((res) => {\n                this.brandLists = res.lists\n            })\n        },\n        // 选中条件\n        handleScreen(item) {\n            this.search.brand_id = item.id\n        },\n        // 确定\n        handleConfirm() {\n            this.showScreen = false\n            this.mescroll.resetUpScroll()\n        },\n        // 重置\n        handleReset() {\n            this.search.brand_id = ''\n            this.search.is_member_price = ''\n            this.search.max_price = ''\n            this.search.min_price = ''\n\n            this.showScreen = false\n            this.mescroll.resetUpScroll()\n        }\n    },\n\n    onLoad() {\n        const options = this.$Route.query\n        if (JSON.stringify(options) !== '{}') {\n            !!options.id &&\n                this.$set(this.search, 'category_id', options.id) &&\n                this.handleSearch('')\n            // !!options.name && this.handleSearch(options.name)\n        }\n        // 获取历史搜素内容\n        this.initSearchHistoryData()\n        this.getSearchList()\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.search-container {\n    display: flex;\n    flex-direction: column;\n}\n\n.search-input {\n    display: flex;\n    align-items: center;\n    height: 100rpx;\n    padding: 0 20rpx;\n    background-color: #ffffff;\n\n    .search-action {\n        width: 100rpx;\n        text-align: center;\n    }\n}\n\n.search-options-container {\n    box-sizing: border-box;\n    height: 100vh;\n    padding: 0 20rpx;\n    background-color: #ffffff;\n\n    .search-options {\n        &-header {\n            display: flex;\n            justify-content: space-between;\n            padding: 30rpx 0 24rpx 0;\n            font-size: $-font-size-nr;\n        }\n\n        &-main {\n            display: flex;\n            flex-wrap: wrap;\n        }\n\n        &-item {\n            padding: 8rpx 24rpx;\n            margin: 0 16rpx 24rpx 0;\n            border-radius: 60px;\n            background-color: #f4f4f4;\n        }\n    }\n}\n\n.sort {\n    display: flex;\n    align-items: center;\n    height: 80rpx;\n    font-size: $-font-size-nr;\n    background-color: #ffffff;\n\n    &-item {\n        flex: 1;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n\n    &-item--active {\n        @include font_color();\n    }\n\n    &-style {\n        position: relative;\n        width: 100rpx;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        &::before {\n            position: absolute;\n            top: 50%;\n            left: 0;\n            transform: translateY(-50%);\n            display: block;\n            content: '';\n            height: 1em;\n            border-left: $-solid-border;\n        }\n    }\n}\n\n.goods-container {\n    flex: 1;\n    display: flex;\n    padding: 0 20rpx;\n\n    &-square {\n        flex-direction: row;\n        flex-wrap: wrap;\n        justify-content: space-between;\n    }\n\n    &-rectangle {\n        flex-direction: column;\n    }\n\n    .goods-item {\n        margin-top: 16rpx;\n    }\n}\n.price-item {\n    width: 40%;\n    padding: 0 20rpx;\n    border: 1px solid transparent;\n    background-color: #f5f5f5;\n    line-height: 60rpx;\n    border-radius: 60rpx;\n    text-align: center;\n}\n.screen-popup {\n    .screen-content {\n        height: 100%;\n\n        .screen-item {\n            padding: 20rpx;\n        }\n\n        .brand-list {\n            border-radius: 10rpx;\n\n            .brand-item {\n                width: 30%;\n                padding: 0 20rpx;\n                border: 1px solid transparent;\n                background-color: #f5f5f5;\n                line-height: 60rpx;\n                border-radius: 60rpx;\n                text-align: center;\n                &.active {\n                    @include border_color();\n                    @include background_color(0.3);\n                    @include font_color();\n                }\n                &:not(:nth-of-type(3n)) {\n                    margin-right: 20rpx;\n                }\n            }\n        }\n    }\n\n    .screen-footer {\n        padding: 20rpx;\n\n        .btn {\n            flex: 1;\n            border-radius: 60rpx;\n\n            &--reset {\n                @include font_color();\n                border: 1px solid currentColor;\n                margin-right: 20rpx;\n                z-index: 999;\n            }\n\n            &--confirm {\n                @include background_color();\n                color: #fff;\n            }\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_search.vue?vue&type=style&index=0&id=6add0fa6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_search.vue?vue&type=style&index=0&id=6add0fa6&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1734252390587\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
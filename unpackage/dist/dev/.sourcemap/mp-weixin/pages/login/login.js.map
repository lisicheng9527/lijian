{"version":3,"sources":["uni-app:///main.js","webpack:////Users/lisicheng/project/lijian/pages/login/login.vue?6550","webpack:////Users/lisicheng/project/lijian/pages/login/login.vue?de2a","webpack:////Users/lisicheng/project/lijian/pages/login/login.vue?039e","webpack:////Users/lisicheng/project/lijian/pages/login/login.vue?0171","uni-app:///pages/login/login.vue","webpack:////Users/lisicheng/project/lijian/pages/login/login.vue?3ba2","webpack:////Users/lisicheng/project/lijian/pages/login/login.vue?ddde"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","ACCOUNT","SMS_CODE","data","password","account","code","loginType","isWeixin","codeTips","showLoginPop","loginData","isAgree","showModel","phoneLogin","AgreemenName","AgreemenUserName","methods","getPolicyAgreement","type","mnpLogin","userInfo","avatarUrl","nickName","gender","uni","title","mask","wxCode","nickname","headimgurl","getCodeUrl","wechath5","oaLogin","oaAutoLogin","url","appLogin","provider","success","openid","access_token","then","finally","loginFun","scene","loginHandle","goBack","onLoad","options","Cache","changeLoginType","sendSMS","mobile","has","catch","console","codeChange","ttLogin","err","res","openSetting","content","confirmColor","handleSubmitInfo","closePopup","computed","isPhoneRegister","isBindMobile","loginWay","hasLoginWay","isMnpWxAuth","isOaWxAuth","isAPPWxAuth","isOaWxAutoLogin","isToutiaoAuth","isDisabled","onUnload"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,aAAa,uTAEN;AACP,KAAK;AACL;AACA,aAAa,iQAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,aAAa,uNAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9FA;AAAA;AAAA;AAAA;AAAozB,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACkOx0B;AACA;AASA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;EACAC;EACAC;AACA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;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GACAkB;kBACA;gBACA,GACAa;kBACAC;kBACA9B;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAmC;MACAnC;QACAC;QACAmC;QACAC;QACAxB;UACA;YACAb;UACA;QACA;MACA;IACA;IACAsC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACApD;gBAAA;gBAAA,OACA;cAAA;gBAAAgD;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAK;MACA;IACA;EAAA,EACA;EACAC;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;QAAA;MAAA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;UAAA;QAAA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;EACA;EACA5B;IACA;IACA;IACA;IACA;IACA;EAIA;EACA6B;AACA;AAAA,2B;;;;;;;;;;;;;AC7lBA;AAAA;AAAA;AAAA;AAAugD,CAAgB,k6CAAG,EAAC,C;;;;;;;;;;;ACA3hD;AACA,kBAAkB;AAClB,OAAO,KAAU,EAAE,kBAKd","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&\"","var components\ntry {\n  components = {\n    uSticky: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-sticky/u-sticky\" */ \"@/components/uview-ui/components/u-sticky/u-sticky.vue\"\n      )\n    },\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-navbar/u-navbar\" */ \"@/components/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uField: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-field/u-field\" */ \"@/components/uview-ui/components/u-field/u-field.vue\"\n      )\n    },\n    uVerificationCode: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-verification-code/u-verification-code\" */ \"@/components/uview-ui/components/u-verification-code/u-verification-code.vue\"\n      )\n    },\n    uCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-checkbox/u-checkbox\" */ \"@/components/uview-ui/components/u-checkbox/u-checkbox.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-modal/u-modal\" */ \"@/components/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n    mploginPopup: function () {\n      return import(\n        /* webpackChunkName: \"components/mplogin-popup/mplogin-popup\" */ \"@/components/mplogin-popup/mplogin-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$getImageUri(\"resource/image/shopapi/default/login_bg.png\")\n  var g0 =\n    _vm.phoneLogin && _vm.loginType == 2\n      ? _vm.codeTips == \"获取验证码\" && _vm.account.length !== 11\n      : null\n  var g1 = _vm.phoneLogin ? _vm.appConfig.login_way.length : null\n  var m1 = _vm.phoneLogin ? _vm.hasLoginWay(2) && _vm.loginType == 2 : null\n  var m2 = _vm.phoneLogin ? _vm.hasLoginWay(1) && _vm.loginType == 1 : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.phoneLogin = !_vm.phoneLogin\n    }\n    _vm.e1 = function ($event) {\n      ;(_vm.isAgree = true), (_vm.showModel = false)\n    }\n    _vm.e2 = function ($event) {\n      _vm.showModel = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        g0: g0,\n        g1: g1,\n        m1: m1,\n        m2: m2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\n    <view\n        class=\"pages\"\n        :class=\"themeName\"\n        :style=\"\n            'background-image: url(' +\n            $getImageUri('resource/image/shopapi/default/login_bg.png') +\n            ')'\n        \"\n    >\n        <!-- #ifndef  H5 -->\n\n        <u-sticky offset-top=\"0\" h5-nav-height=\"0\" bg-color=\"transparent\">\n            <u-navbar\n                :is-back=\"true\"\n                title=\"登录\"\n                :title-bold=\"true\"\n                :is-fixed=\"false\"\n                :border-bottom=\"false\"\n                :background=\"{ background: 'rgba(256,256, 256,0)' }\"\n            ></u-navbar>\n        </u-sticky>\n        <!-- #endif -->\n\n        <view class=\"login\">\n            <view class=\"login-box\">\n                <image class=\"logo\" :src=\"appConfig.logo\" mode=\"heightFix\"></image>\n                <block v-if=\"!phoneLogin\">\n                    <!-- 一键登录Start -->\n                    <!-- #ifdef MP-WEIXIN -->\n                    <button\n                        class=\"login-btn white login-btn-user\"\n                        v-if=\"isMnpWxAuth\"\n                        @tap=\"mnpLogin\"\n                    >\n                        用户一键登录\n                    </button>\n                    <!-- #endif -->\n                    <!-- #ifdef H5 -->\n                    <button\n                        class=\"login-btn white login-btn-user\"\n                        v-if=\"isOaWxAuth && isWeixin\"\n                        @tap=\"getCodeUrl\"\n                    >\n                        用户一键登录\n                    </button>\n                    <!-- #endif -->\n                    <!-- #ifdef APP-PLUS -->\n                    <button\n                        class=\"login-btn white login-btn-user\"\n                        v-if=\"isAPPWxAuth\"\n                        @tap=\"appLogin\"\n                    >\n                        用户一键登录\n                    </button>\n                    <!-- #endif -->\n                    <!-- 字节登录 -->\n                    <!-- #ifdef MP-TOUTIAO -->\n                    <button\n                        class=\"login-btn white login-btn-user\"\n                        v-if=\"isToutiaoAuth\"\n                        @tap=\"ttLogin\"\n                    >\n                        用户一键登录\n                    </button>\n                    <!-- #endif  -->\n                    <!-- 一键登录End -->\n                    <button\n                        class=\"login-btn white login-btn-mobile\"\n                        @click=\"phoneLogin = !phoneLogin\"\n                    >\n                        手机号登录\n                    </button>\n                </block>\n            </view>\n            <block v-if=\"phoneLogin\">\n                <view class=\"input m-t-40\">\n                    <u-field\n                        label-width=\"0\"\n                        v-model=\"account\"\n                        placeholder=\"请输入手机号\"\n                        :border-bottom=\"false\"\n                        :style=\"{ width: '100%' }\"\n                        type=\"number\"\n                    />\n                </view>\n                <view class=\"input m-t-40\" v-if=\"loginType == 1\">\n                    <u-field\n                        label-width=\"0\"\n                        v-model=\"password\"\n                        type=\"password\"\n                        :password-icon=\"false\"\n                        placeholder=\"请输入密码\"\n                        :border-bottom=\"false\"\n                    >\n                        <view class=\"forget-btn p-l-20\" slot=\"right\">\n                            <router-link to=\"/pages/forget_pwd/forget_pwd\"> 忘记密码? </router-link>\n                        </view>\n                    </u-field>\n                </view>\n                <view class=\"input m-t-40\" v-if=\"loginType == 2\">\n                    <u-field\n                        label-width=\"0\"\n                        v-model=\"code\"\n                        placeholder=\"请输入验证码\"\n                        :border-bottom=\"false\"\n                        type=\"number\"\n                    >\n                        <view slot=\"right\">\n                            <view class=\"sms-btn p-l-20\" @tap=\"sendSMS\">\n                                <!-- 获取验证码 -->\n                                <u-verification-code\n                                    unique-key=\"login\"\n                                    ref=\"uCode\"\n                                    @change=\"codeChange\"\n                                >\n                                </u-verification-code>\n                                <view\n                                    class=\"xs\"\n                                    :class=\"{\n                                        disabled: codeTips == '获取验证码' && account.length !== 11\n                                    }\"\n                                    >{{ codeTips }}</view\n                                >\n                            </view>\n                        </view>\n                    </u-field>\n                </view>\n            </block>\n            <view class=\"m-t-40\">\n                <u-checkbox\n                    v-model=\"isAgree\"\n                    :active-color=\"themeColor\"\n                    shape=\"circle\"\n                    :label-disabled=\"true\"\n                >\n                    <view class=\"sm flex\">\n                        已阅读并同意\n                        <router-link\n                            data-theme=\"\"\n                            to=\"/bundle/pages/server_explan/server_explan?type=1\"\n                        >\n                            <view class=\"agreement\">《{{ AgreemenName || '服务协议' }}》</view>\n                        </router-link>\n                        和\n                        <router-link to=\"/bundle/pages/server_explan/server_explan?type=2\">\n                            <view class=\"agreement\">《{{ AgreemenUserName || '隐私协议' }}》</view>\n                        </router-link>\n                    </view>\n                </u-checkbox>\n            </view>\n            <!-- @click=\"showModel = true\" -->\n            <block v-if=\"phoneLogin\">\n                <button\n                    class=\"login-btn white login-btn-user\"\n                    @tap=\"loginFun\"\n                    :class=\"{ disabled: isDisabled }\"\n                >\n                    登录\n                </button>\n                <view class=\"m-t-40 flex row-between\">\n                    <view v-show=\"appConfig.login_way.length != 1\">\n                        <span> 已有账号，使用</span>\n                        <span\n                            class=\"agreement\"\n                            @tap=\"changeLoginType\"\n                            v-if=\"hasLoginWay(2) && loginType == 2\"\n                            >密码登录</span\n                        >\n                        <span\n                            class=\"agreement\"\n                            @tap=\"changeLoginType\"\n                            v-if=\"hasLoginWay(1) && loginType == 1\"\n                            >验证码登录</span\n                        >\n                    </view>\n                    <view\n                        :style=\"{\n                            'margin-left': 'auto'\n                        }\"\n                    >\n                        <router-link to=\"/pages/register/register\" v-if=\"isPhoneRegister\"\n                            >注册账号\n                        </router-link>\n                    </view>\n                </view>\n            </block>\n        </view>\n        <u-modal\n            :value=\"showModel\"\n            show-cancel-button\n            :show-title=\"false\"\n            @confirm=\";(isAgree = true), (showModel = false)\"\n            @cancel=\"showModel = false\"\n            :confirm-color=\"themeColor\"\n        >\n            <view class=\"comfirm-box\">\n                <view> 请先阅读并同意 </view>\n                <view class=\"flex row-center\">\n                    <router-link\n                        data-theme=\"\"\n                        to=\"/bundle/pages/server_explan/server_explan?type=1\"\n                    >\n                        <view class=\"agreement\">《{{ AgreemenName || '服务协议' }}》</view>\n                    </router-link>\n                    和\n                    <router-link to=\"/bundle/pages/server_explan/server_explan?type=2\">\n                        <view class=\"agreement\">《{{ AgreemenUserName || '隐私协议' }}》</view>\n                    </router-link>\n                </view>\n            </view>\n        </u-modal>\n        <!-- #ifdef MP-WEIXIN -->\n        <mplogin-popup\n            v-model=\"showLoginPop\"\n            :logo=\"appConfig.logo\"\n            :title=\"appConfig.shop_name\"\n            :login-data=\"loginData\"\n            @close=\"closePopup\"\n            @update=\"handleSubmitInfo\"\n        />\n        <!--  #endif -->\n    </view>\n</template>\n\n<script>\nimport { mapMutations, mapActions, mapGetters } from 'vuex'\nimport {\n    apiAuthLogin,\n    apiAccountLogin,\n    apiLoginCaptcha,\n    apiToutiaoAuthLogin,\n    apiAppWxLogin,\n    apiUpdateUser,\n    apiCheckMobile\n} from '@/api/app'\nimport wechath5 from '@/utils/wechath5'\nimport { isWeixinClient, currentPage, client, trottle } from '@/utils/tools'\nimport Cache from '@/utils/cache'\nimport { BACK_URL, INVITE_CODE } from '@/config/cachekey'\nimport { getCode, getUserProfile } from '@/utils/login'\nimport { apiPolicyAgreement } from '@/api/app'\n\nconst loginType = {\n    ACCOUNT: 1,\n    SMS_CODE: 2\n}\nexport default {\n    data() {\n        return {\n            password: '',\n            account: '',\n            code: '',\n            loginType: '',\n            isWeixin: '',\n            codeTips: '',\n            showLoginPop: false,\n            loginData: {},\n            isAgree: false,\n            showModel: false,\n            phoneLogin: false,\n            AgreemenName: '',\n            AgreemenUserName: ''\n        }\n    },\n\n    methods: {\n        ...mapMutations(['login']),\n        ...mapActions(['getUser']),\n        // 获取服务协议\n        getPolicyAgreement() {\n            apiPolicyAgreement({\n                type: 1\n            }).then((res) => {\n                this.AgreemenName = res.name\n            })\n            apiPolicyAgreement({\n                type: 2\n            }).then((res) => {\n                this.AgreemenUserName = res.name\n            })\n        },\n        // 小程序微信登录\n        async mnpLogin() {\n            if (!this.isAgree) {\n                this.showModel = true\n\n                return\n            }\n            const {\n                userInfo: { avatarUrl, nickName, gender }\n            } = await getUserProfile()\n            uni.showLoading({\n                title: '登录中...',\n                mask: true\n            })\n            const wxCode = await getCode()\n            const data = await apiAuthLogin({\n                code: wxCode,\n                nickname: nickName,\n                headimgurl: avatarUrl\n            })\n            if (data.is_new_user) {\n                uni.hideLoading()\n                this.showLoginPop = true\n                this.loginData = data\n            } else {\n                this.loginHandle(data)\n            }\n            // this.loginHandle(data)\n        },\n        getCodeUrl() {\n            if (!this.isAgree) {\n                // this.$toast({ title: \"请阅读并同意《服务协议》《隐私协议》\" });\n                this.showModel = true\n\n                return\n            }\n            wechath5.getWxUrl()\n        },\n        // 公众号微信登录\n        async oaLogin(code) {\n            if (!code) return\n            const data = await wechath5.authLogin(code)\n            this.loginHandle(data)\n        },\n        oaAutoLogin() {\n            // H5微信登录\n            const { code } = this.$Route.query\n            this.isWeixin = isWeixinClient()\n            if (this.isLogin) {\n                // 已经登录 => 首页\n                uni.switchTab({\n                    url: '/pages/index/index'\n                })\n                return\n            }\n            if (code) {\n                // 带有code => 登录\n                return this.oaLogin(code)\n            }\n            if (this.isWeixin && this.isOaWxAutoLogin) {\n                // 开启自动授权登录\n                // this.getCodeUrl();\n                wechath5.getWxUrl()\n            }\n        },\n        // app微信登录\n        async appLogin() {\n            if (!this.isAgree) {\n                // this.$toast({ title: \"请阅读并同意《服务协议》《隐私协议》\" });\n                this.showModel = true\n\n                return\n            }\n            uni.login({\n                provider: 'weixin',\n                success: (res) => {\n                    uni.showLoading({\n                        title: '登录中...',\n                        mask: true\n                    })\n                    const { openid, access_token } = res.authResult\n                    apiAppWxLogin({\n                        openid,\n                        access_token\n                    })\n                        .then((res) => {\n                            this.loginHandle(res)\n                        })\n                        .finally((res) => {\n                            uni.hideLoading()\n                        })\n                }\n            })\n        },\n        // 账号登录\n        async loginFun() {\n            const { account, password, telephone, code, loginType } = this\n            if (!account) {\n                this.$toast({\n                    title: '请输入手机号'\n                })\n                return\n            }\n\n            if (this.loginType == 1 && !password) {\n                this.$toast({\n                    title: '请输入密码'\n                })\n                return\n            }\n            if (this.loginType == 2 && !code) {\n                this.$toast({\n                    title: '请输入验证码'\n                })\n                return\n            }\n            if (!this.isAgree) {\n                this.showModel = true\n                return\n            }\n\n            apiAccountLogin({\n                scene: loginType,\n                account,\n                password: loginType == 1 ? password : '',\n                code: loginType == 2 ? code : ''\n            }).then((res) => {\n                this.loginHandle(res)\n            })\n        },\n        // 登录结果处理\n        async loginHandle(data) {\n            this.login(data)\n            this.getUser()\n            // 更新购物车\n            this.$store.dispatch('getCartNum')\n            uni.hideLoading()\n            if (this.isBindMobile && !data.mobile) {\n                return this.$Router.replace('/pages/bind_mobile/bind_mobile')\n            }\n            this.goBack()\n        },\n        goBack() {\n            if (getCurrentPages().length > 1) {\n                this.$Router.back(1, {\n                    success: () => {\n                        const { onLoad, options } = currentPage()\n                        // 刷新上一个页面\n                        onLoad && onLoad(options)\n                    }\n                })\n            } else if (Cache.get(BACK_URL)) {\n                this.$Router.replace(Cache.get(BACK_URL))\n            } else {\n                this.$Router.replaceAll('/pages/index/index')\n            }\n            Cache.remove(BACK_URL)\n        },\n        changeLoginType() {\n            if (this.loginType == loginType.ACCOUNT) {\n                this.loginType = loginType.SMS_CODE\n            } else if (this.loginType == loginType.SMS_CODE) {\n                this.loginType = loginType.ACCOUNT\n            }\n        },\n        // 发送验证码\n        async sendSMS() {\n            if (!this.$refs.uCode.canGetCode) return\n            if (!this.account) {\n                this.$toast({\n                    title: '请输入手机号'\n                })\n                return\n            }\n            try {\n                /**\n                 * @descriptionp 检测手机号是否已经注册\n                 */\n                const { has } = await apiCheckMobile({ mobile: this.account })\n                if (has === 0) {\n                    return this.$toast({\n                        title: '手机号未注册'\n                    })\n                }\n                apiLoginCaptcha({\n                    mobile: this.account\n                })\n                    .then((res) => {\n                        this.$refs.uCode.start()\n                    })\n                    .catch((err) => {\n                        console.log(err)\n                    })\n            } catch (error) {\n                console.log(error)\n            }\n        },\n\n        codeChange(tip) {\n            this.codeTips = tip\n        },\n        // 头条小程序登录\n        async ttLogin() {\n            const code = await getCode()\n            const [err, res] = await uni.getUserInfo()\n            if (!res) {\n                this.openSetting()\n                return\n            }\n            const { avatarUrl, nickName } = res.userInfo\n            uni.showLoading({\n                title: '登录中...'\n            })\n\n            apiToutiaoAuthLogin({\n                code,\n                avatarUrl,\n                nickName\n            })\n                .then((res) => {\n                    this.loginHandle(res)\n                })\n                .catch((res) => {\n                    console.log(res)\n                    uni.hideLoading()\n                })\n        },\n        openSetting() {\n            uni.showModal({\n                title: '温馨提示',\n                content: '您已拒绝授权，是否前往设置打开个人信息授权？',\n                confirmColor: this.themeColor,\n                success(res) {\n                    if (res.confirm) {\n                        uni.openSetting()\n                    }\n                }\n            })\n        },\n        async handleSubmitInfo(e) {\n            const loginData = this.loginData\n            const res = await apiUpdateUser(e, loginData.token)\n            this.loginHandle(loginData)\n        },\n        closePopup() {\n            this.showLoginPop = false\n        }\n    },\n    computed: {\n        // 开启手机号注册\n        isPhoneRegister() {\n            const { register_way } = this.appConfig\n            if (!register_way) {\n                return false\n            }\n            return register_way.some((item) => item == 1)\n        },\n        // 开启强制绑定手机号\n        isBindMobile() {\n            const { coerce_mobile } = this.appConfig\n            return coerce_mobile\n        },\n        // 登录方式数组\n        loginWay() {\n            const { login_way } = this.appConfig\n            if (!login_way) return false\n            this.loginType = login_way[0] || ''\n            return login_way\n        },\n        // 是否包含对应的登录方式\n        hasLoginWay() {\n            return (type) => {\n                return this.loginWay && this.loginWay.some((item) => item == type)\n            }\n        },\n        // 开启小程序微信授权\n        isMnpWxAuth() {\n            const { mnp_wechat_auth } = this.appConfig\n            return mnp_wechat_auth\n        },\n\n        // 开启小程序微信授权\n        isOaWxAuth() {\n            const { h5_wechat_auth } = this.appConfig\n            return h5_wechat_auth\n        },\n        // 开启app微信授权\n        isAPPWxAuth() {\n            const { app_wechat_auth } = this.appConfig\n            return app_wechat_auth\n        },\n        // 开启公众号微信自动登录\n        isOaWxAutoLogin() {\n            const { h5_auto_wechat_auth } = this.appConfig\n            return h5_auto_wechat_auth\n        },\n        // 开启小程序头条登录\n        isToutiaoAuth() {\n            const { toutiao_auth } = this.appConfig\n            return toutiao_auth\n        },\n        //登录按钮禁用样式\n        isDisabled() {\n            if (this.account.length == 11 && this.password && this.loginType == 1) {\n                return false\n            } else if (this.account.length == 11 && this.code && this.loginType == 2) {\n                return false\n            } else {\n                return true\n            }\n        }\n    },\n    onLoad() {\n        this.getPolicyAgreement()\n        this.mnpLogin = trottle(this.mnpLogin)\n        this.appLogin = trottle(this.appLogin)\n        this.getCodeUrl = trottle(this.getCodeUrl)\n        this.ttLogin = trottle(this.ttLogin)\n        // #ifdef H5\n        this.oaAutoLogin()\n        // #endif\n    },\n    onUnload() {}\n}\n</script>\n<style lang=\"scss\">\npage {\n    background-color: #fff;\n    height: 100%;\n    padding-bottom: 0;\n}\n\n.login {\n    padding: 60rpx;\n\n    padding-top: 80rpx;\n    &-box {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n    }\n    .logo {\n        height: 260rpx;\n        width: 260rpx;\n        border-radius: 20rpx;\n        margin-bottom: 40rpx;\n    }\n    .login-btn {\n        margin-top: 40rpx;\n        width: 100%;\n        height: 100rpx;\n        line-height: 100rpx;\n        font-size: 32rpx;\n        border-radius: 12rpx;\n        &-user {\n            @include background_color();\n        }\n        &-mobile {\n            background: white;\n            color: black;\n            border: 1px solid #bbb;\n        }\n    }\n    .input {\n        border: 1px solid #d7d7d7;\n        height: 100rpx;\n        border-radius: 12rpx;\n        display: flex;\n        align-items: center;\n    }\n    .forget-btn {\n        border-left: $-solid-border;\n    }\n    .sms-btn {\n        text-align: center;\n        border-left: $-solid-border;\n        @include font_color();\n    }\n}\n.comfirm-box {\n    text-align: center;\n    padding: 60rpx 0 70rpx 0;\n}\n.agreement {\n    @include font_color;\n}\n.disabled {\n    opacity: 0.5;\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"red_theme\":\"#FF2C3C\",\"orange_theme\":\"#f7971e\",\"pink_theme\":\"#fa444d\",\"gold_theme\":\"#e0a356\",\"blue_theme\":\"#2f80ed\",\"green_theme\":\"#2ec840\"};\n    if(module.hot) {\n      // 1734252390599\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":true});\n      module.hot.dispose(cssReload);\n      \n    }\n  "],"sourceRoot":""}
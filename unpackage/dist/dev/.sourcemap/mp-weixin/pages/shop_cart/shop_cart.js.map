{"version":3,"sources":["uni-app:///main.js","webpack:////Users/lisicheng/project/lijian/pages/shop_cart/shop_cart.vue?cf26","webpack:////Users/lisicheng/project/lijian/pages/shop_cart/shop_cart.vue?02cf","webpack:////Users/lisicheng/project/lijian/pages/shop_cart/shop_cart.vue?f4e9","webpack:////Users/lisicheng/project/lijian/pages/shop_cart/shop_cart.vue?c122","uni-app:///pages/shop_cart/shop_cart.vue","webpack:////Users/lisicheng/project/lijian/pages/shop_cart/shop_cart.vue?fe29","webpack:////Users/lisicheng/project/lijian/pages/shop_cart/shop_cart.vue?9207"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","data","pagesData","total_amount","cartLists","cartListsId","text","style","backgroundColor","methods","handlereCheck","path","getCartList","res","baseSelect","countChange","cart_id","goods_num","then","finally","changeDelPopup","goodsDelete","title","changeGoodsStatus","status","selected","adminGoodsStatus","console","temp","changeAllSelect","adminAllSelect","i","goShoping","goToConfirm","query","from","payload","source","changeTab","getPage","type","common","content","uni","handleactionOpen","handledisaactionOpen","handleactionClick","handledisactionClick","handleClearAll","cart_ids","handleAdminDel","computed","cartNum","getResultBtn","goodsListActive","item","selectAllDisabled","watch","onShow","created"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,kBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;AACc;;;AAGtE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,yRAEN;AACP,KAAK;AACL;AACA,aAAa,iQAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,uKAEN;AACP,KAAK;AACL;AACA,aAAa,6QAEN;AACP,KAAK;AACL;AACA,aAAa,6NAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,aAAa,kOAEN;AACP,KAAK;AACL;AACA,aAAa,yOAEN;AACP,KAAK;AACL;AACA,aAAa,2PAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvHA;AAAA;AAAA;AAAA;AAAwzB,CAAgB,uyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC2W50B;AASA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAC;EAEAC;IAAA;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IAAA,uDACA,qDACA,uDACA,yDACA,+DACA,sDACA,CACA;MACAC;MACAC;QACAC;MACA;IACA,EACA,sDACA,wDACA,0DACA,kDACA,4DACA;EAEA;EAEAC;IACA;IACAC;MACA;QACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;QACA;QACAC;UACAA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QACA;QACA;MACA;MACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;MACA;MACA;QACAC;QACAC;MACA,GACAC;QACA;MACA,GACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA;gBAAA,OACA;kBACAL;gBACA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBACA;kBACAM;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MAAA;MACA;MACAC;MACA;QACAR;QACAS;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBAAA;gBAAA,OACA;cAAA;gBACAC;kBACA;gBACA;gBACA;kBACA;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QAAA;MAAA;MACA;QACAb;QACAS;MACA;QACA;MACA;IACA;IACA;IACAK;MAAA;MACA;QACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;QAAA;MAAA;QAAA;MAAA;MACA;QAAAX;MAAA;MACA;QACAX;QACAuB;UACAC;UACAC;YACAC;YACArB;UACA;QACA;MACA;IACA;IAEA;IACAsB;MACA;QACA3B;MACA;IACA;IAEA4B;MAAA;MACA;QACAC;MACA;QACA,IACAlB,QAGAT,IAHA4B;UACAA,SAEA5B,IAFA4B;UACAC,UACA7B,IADA6B;QAEAC;UACArB;QACA;QACA;MACA;IACA;IACA;IACAsB;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAC;kBACA;gBACA;gBAAA;gBAAA,OAEA;kBAAAA;gBAAA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAvB;gBACAC;kBACA;gBACA;gBACAqB;kBACA;gBACA;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBAAA,kCACA;cAAA;gBAAA;gBAAA,OAEA;kBAAAA;gBAAA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;EACAE;IACAC;MACA;IACA;IACAC;MACA;QAAA;MAAA;QAAA;MAAA;MACA;QACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA,OACA,sBACA;QAAA,OACAC;MAAA,EACA;IAEA;IAEA;IACAC;MACA;IACA;EACA;EACAC;IACArD;MAAA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;IACA;EACA;EACAsD;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OAEA;YAAA;cACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EAEAC;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnpBA;AAAA;AAAA;AAAA;AAA2gD,CAAgB,s6CAAG,EAAC,C;;;;;;;;;;;ACA/hD;AACA,kBAAkB;AAClB,OAAO,KAAU,EAAE,kBAKd","file":"pages/shop_cart/shop_cart.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/shop_cart/shop_cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./shop_cart.vue?vue&type=template&id=bad40acc&\"\nvar renderjs\nimport script from \"./shop_cart.vue?vue&type=script&lang=js&\"\nexport * from \"./shop_cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shop_cart.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shop_cart/shop_cart.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop_cart.vue?vue&type=template&id=bad40acc&\"","var components\ntry {\n  components = {\n    uSticky: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-sticky/u-sticky\" */ \"@/components/uview-ui/components/u-sticky/u-sticky.vue\"\n      )\n    },\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-navbar/u-navbar\" */ \"@/components/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uSwipeAction: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-swipe-action/u-swipe-action\" */ \"@/components/uview-ui/components/u-swipe-action/u-swipe-action.vue\"\n      )\n    },\n    uCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-checkbox/u-checkbox\" */ \"@/components/uview-ui/components/u-checkbox/u-checkbox.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-image/u-image\" */ \"@/components/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    price: function () {\n      return import(\n        /* webpackChunkName: \"components/price/price\" */ \"@/components/price/price.vue\"\n      )\n    },\n    uNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-number-box/u-number-box\" */ \"@/components/uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n    wGoodsrecom: function () {\n      return import(\n        /* webpackChunkName: \"components/widgets/goodsrecom/goodsrecom\" */ \"@/components/widgets/goodsrecom/goodsrecom.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-modal/u-modal\" */ \"@/components/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n    tabbar: function () {\n      return import(\n        /* webpackChunkName: \"components/tabbar/tabbar\" */ \"@/components/tabbar/tabbar.vue\"\n      )\n    },\n    uMask: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-mask/u-mask\" */ \"@/components/uview-ui/components/u-mask/u-mask.vue\"\n      )\n    },\n    uLoading: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-loading/u-loading\" */ \"@/components/uview-ui/components/u-loading/u-loading.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.isLogin && _vm.activeLists.length != 0\n  var g1 = g0 ? _vm.activeLists.length : null\n  var g2 = _vm.isLogin && _vm.inactiveLists.length != 0\n  var g3 = g2 ? _vm.inactiveLists.length : null\n  var g4 = _vm.isLogin && _vm.cartLists.length == 0\n  var g5 = !_vm.admin\n    ? _vm.cartLists.filter(function (item) {\n        return item.adminCheck == true\n      }).length\n    : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.admin = !_vm.admin\n    }\n    _vm.e1 = function ($event) {\n      _vm.admin = !_vm.admin\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop_cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop_cart.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"shop-cart\" :class=\"themeName\">\n\t\t<!-- #ifndef  H5 -->\n\t\t<u-sticky offset-top=\"0\" h5-nav-height=\"0\" bg-color=\"transparent\">\n\t\t  \t<u-navbar :is-back=\"false\" title=\"购物车\" :title-bold=\"true\" :is-fixed=\"false\" :border-bottom=\"false\"\n\t\t  \t\t:background=\"{ background: 'rgba(256,256, 256, 1)' }\"\n\t\t  \t\ttitle-color=\"#000\"></u-navbar>\n\t\t</u-sticky>\n\t\t<!-- #endif -->\n        <view class=\"main\">\n            <!-- 有效商品 -->\n            <block v-if=\"isLogin && activeLists.length != 0\">\n                <view class=\"cart-header\">\n                    <span> 共{{ activeLists.length }}件商品 </span>\n                    <span v-if=\"admin\" @click=\"admin = !admin\"> 管理 </span>\n                    <span v-else @click=\"admin = !admin\"> 完成 </span>\n                </view>\n                <view class=\"goods-container\">\n                    <block v-for=\"(item, index) in activeLists\" :key=\"index\">\n                        <u-swipe-action\n                            :index=\"index\"\n                            :options=\"option\"\n                            @open=\"handleactionOpen\"\n                            @click=\"handleactionClick\"\n                            :show=\"activeIndex == item.id\"\n                        >\n                            <!-- 商品卡片 -->\n                            <view class=\"cart-list\" style=\"width: 100%\">\n                                <view class=\"cart-item bg-white flex\">\n                                    <!-- 商品头部 -->\n                                    <view class=\"row-between flex select\">\n                                        <u-checkbox\n                                            v-if=\"admin\"\n                                            label-size=\"28rpx\"\n                                            :active-color=\"themeColor\"\n                                            v-model=\"item.selected\"\n                                            @change=\"changeGoodsStatus(item.selected, item.id)\"\n                                            :label-disabled=\"false\"\n                                            shape=\"circle\"\n                                            :disabled=\"\n                                                item.sku_is_delete == 1 || item.sku_stock_none == 1\n                                            \"\n                                        >\n                                        </u-checkbox>\n                                        <u-checkbox\n                                            v-else\n                                            label-size=\"28rpx\"\n                                            :active-color=\"themeColor\"\n                                            v-model=\"item.adminCheck\"\n                                            :label-disabled=\"false\"\n                                            shape=\"circle\"\n                                            @change=\"adminGoodsStatus\"\n                                        >\n                                        </u-checkbox>\n                                    </view>\n                                    <!-- 商品的主内容 -->\n                                    <router-link\n                                        :to=\"`/pages/goods_detail/goods_detail?id=${item.goods_id}`\"\n                                        style=\"width: 100%\"\n                                    >\n                                        <view\n                                            class=\"flex\"\n                                            :style=\"{ padding: '20rpx', width: '100%' }\"\n                                        >\n                                            <u-image\n                                                width=\"180rpx\"\n                                                height=\"180rpx\"\n                                                :src=\"\n                                                    item.goods_item.image\n                                                        ? item.goods_item.image\n                                                        : item.goods.image\n                                                \"\n                                            />\n                                            <view class=\"m-l-20\" style=\"flex: 1\">\n                                                <view class=\"line-2 nr\">{{ item.goods.name }}</view>\n                                                <block\n                                                    v-if=\"\n                                                        item.sku_is_delete == 0 &&\n                                                        item.sku_stock_none == 0\n                                                    \"\n                                                >\n                                                    <view class=\"muted xs line-2 m-t-10\">\n                                                        {{ item.goods_item.spec_value_str }}\n                                                    </view>\n                                                    <view class=\"row-between flex m-t-20\">\n                                                        <view class=\"price flex primary\">\n                                                            <price\n                                                                :content=\"\n                                                                    item.goods_item.sell_price\n                                                                \"\n                                                                :color=\"themeColor\"\n                                                                mainSize=\"36rpx\"\n                                                                minorSize=\"28rpx\"\n                                                            ></price>\n                                                        </view>\n                                                        <view class=\"cartNum\" @tap.stop=\"\">\n                                                            <u-number-box\n                                                                :disabled=\"item.cart_status != 0\"\n                                                                v-model=\"item.goods_num\"\n                                                                :min=\"1\"\n                                                                async-change\n                                                                positiveInteger\n                                                                @change=\"\n                                                                    countChange($event, item.id)\n                                                                \"\n                                                            />\n                                                        </view>\n                                                    </view>\n                                                </block>\n                                                <block v-else>\n                                                    <view\n                                                        class=\"flex row-between\"\n                                                        style=\"margin-top: 80rpx\"\n                                                    >\n                                                        <view> 请重新选择商品规格 </view>\n                                                        <!-- <router-link\n                              :to=\"`/pages/goods_detail/goods_detail?id=${item.goods_id}&cart_id=${item.id}&reCheck=1`\"\n                            > -->\n                                                        <view\n                                                            class=\"change-sku\"\n                                                            @tap.stop=\"\n                                                                handlereCheck(\n                                                                    item.goods_id,\n                                                                    item.id\n                                                                )\n                                                            \"\n                                                            >重选</view\n                                                        >\n                                                        <!-- </router-link> -->\n                                                    </view>\n                                                </block>\n                                            </view>\n                                        </view>\n                                    </router-link>\n                                </view>\n                            </view>\n                        </u-swipe-action>\n                    </block>\n                </view>\n            </block>\n            <!-- 无效商品 -->\n            <block v-if=\"isLogin && inactiveLists.length != 0\">\n                <view class=\"disable-header\">\n                    <span>失效商品{{ inactiveLists.length }}件</span>\n                    <span style=\"color: #dd524d\" @click=\"handleClearAll\">清空失效商品</span>\n                </view>\n                <view class=\"goods-container\">\n                    <block v-for=\"(item, index) in inactiveLists\" :key=\"index\">\n                        <u-swipe-action\n                            :index=\"index\"\n                            :options=\"option\"\n                            @open=\"handledisaactionOpen\"\n                            @click=\"handledisactionClick\"\n                            :show=\"activeIndex == item.id\"\n                        >\n                            <!-- 商品卡片 -->\n                            <view class=\"cart-list\" style=\"width: 100%\">\n                                <view\n                                    class=\"cart-item bg-white flex\"\n                                    :class=\"{\n                                        invalid:\n                                            item.cart_status == 1 ||\n                                            (item.goods.spec_type == 1 &&\n                                                item.goods_item.stock == 0)\n                                    }\"\n                                >\n                                    <!-- 商品头部 -->\n                                    <view class=\"row-between flex select\">\n                                        <u-checkbox\n                                            v-if=\"admin\"\n                                            label-size=\"28rpx\"\n                                            :active-color=\"themeColor\"\n                                            v-model=\"item.selected\"\n                                            @change=\"changeGoodsStatus(item.selected, item.id)\"\n                                            :label-disabled=\"false\"\n                                            shape=\"circle\"\n                                            :disabled=\"\n                                                item.cart_status == 1 ||\n                                                (item.goods.spec_type == 1 &&\n                                                    item.goods_item.stock == 0)\n                                            \"\n                                        >\n                                        </u-checkbox>\n                                        <u-checkbox\n                                            v-else\n                                            label-size=\"28rpx\"\n                                            :active-color=\"themeColor\"\n                                            v-model=\"item.adminCheck\"\n                                            :label-disabled=\"false\"\n                                            shape=\"circle\"\n                                            @change=\"adminGoodsStatus\"\n                                        ></u-checkbox>\n                                    </view>\n                                    <!-- 商品的主内容 -->\n                                    <router-link\n                                        :to=\"`/pages/goods_detail/goods_detail?id=${item.goods_id}`\"\n                                        style=\"width: 100%\"\n                                    >\n                                        <view\n                                            class=\"flex\"\n                                            :style=\"{ padding: '20rpx', width: '100%' }\"\n                                        >\n                                            <view class=\"disable-tip\">\n                                                <u-image\n                                                    width=\"180rpx\"\n                                                    height=\"180rpx\"\n                                                    :src=\"item.goods.image\"\n                                                />\n                                                <span\n                                                    class=\"disable-text\"\n                                                    v-if=\"\n                                                        item.goods.spec_type == 1 &&\n                                                        item.goods_item.stock == 0\n                                                    \"\n                                                    >库存不足</span\n                                                >\n                                                <span class=\"disable-text\" v-else>商品下架</span>\n                                            </view>\n                                            <view class=\"m-l-20 disable-body\" style=\"flex: 1\">\n                                                <view class=\"line-2 nr\">{{ item.goods.name }}</view>\n                                                <view class=\"row-between flex m-t-20\">\n                                                    该商品已不能购买\n                                                </view>\n                                            </view>\n                                        </view>\n                                    </router-link>\n                                </view>\n                            </view>\n                        </u-swipe-action>\n                    </block>\n                </view>\n            </block>\n            <!-- 购物车空状态 -->\n            <view\n                class=\"cart-null bg-white m-b-20\"\n                style=\"padding: 80rpx 0 50rpx\"\n                v-if=\"isLogin && cartLists.length == 0\"\n            >\n                <image class=\"img-null\" src=\"/static/images/empty/cart.png\"></image>\n                <view class=\"muted m-b-20\">购物车暂无任何商品~</view>\n                <view class=\"br60 btn flex row-center\" @tap=\"goShoping\">去逛逛</view>\n            </view>\n\n            <!-- 是否登录的空状态 -->\n            <view v-if=\"!isLogin\" class=\"login column-center\" style=\"padding: 200rpx 0 50rpx\">\n                <image class=\"img-null\" src=\"/static/images/empty/cart.png\"></image>\n                <view class=\"muted mt20\">登录后才能查看购物车哦</view>\n                <navigator class=\"white br60 row-center btn\" url=\"/pages/login/login\">\n                    <text>去登录</text>\n                </navigator>\n            </view>\n\n            <!-- diy组件区 -->\n            <block v-for=\"(item, cIndex) in pagesData\" :key=\"cIndex\">\n                <template v-if=\"item.name == 'goodsrecom'\">\n                    <w-goodsrecom\n                        v-show=\"item.show\"\n                        :content=\"item.content\"\n                        :styles=\"item.styles\"\n                    />\n                </template>\n            </block>\n        </view>\n\n        <!-- 底部结算栏 -->\n        <view class=\"footer flex bg-white\">\n            <!-- left -->\n            <checkbox-group class=\"normal\" v-if=\"admin\">\n                <u-checkbox\n                    label-size=\"28rpx\"\n                    @change=\"changeAllSelect\"\n                    id=\"checkAll\"\n                    value=\"all\"\n                    :active-color=\"themeColor\"\n                    v-model=\"isSelectedAll\"\n                    :label-disabled=\"false\"\n                    :disabled=\"selectAllDisabled\"\n                    shape=\"circle\"\n                >\n                    <text class=\"normal\">全选</text>\n                </u-checkbox>\n            </checkbox-group>\n            <checkbox-group class=\"normal\" v-else>\n                <u-checkbox\n                    label-size=\"28rpx\"\n                    @change=\"adminAllSelect\"\n                    id=\"checkAll\"\n                    value=\"all\"\n                    v-model=\"adminCheckAll\"\n                    :active-color=\"themeColor\"\n                    :label-disabled=\"false\"\n                    :disabled=\"selectAllDisabled\"\n                    shape=\"circle\"\n                >\n                    <text class=\"normal\">全选</text>\n                </u-checkbox>\n            </checkbox-group>\n            <!-- right -->\n            <view class=\"all-price nr m-r-20 flex row-right\">\n                <block v-if=\"admin\">\n                    <view>合计：</view>\n                    <price\n                        :content=\"total_amount || 0\"\n                        :color=\"themeColor\"\n                        mainSize=\"36rpx\"\n                        minorSize=\"28rpx\"\n                    ></price>\n                </block>\n                <block v-else>\n                    <view\n                        class=\"right-btn br60 white\"\n                        :style=\"{\n                            background:\n                                cartLists.filter((item) => {\n                                    return item.adminCheck == true\n                                }).length == 0\n                                    ? '#cfcfcf'\n                                    : '#dd524d'\n                        }\"\n                        @click=\"handleAdminDel\"\n                        >删除</view\n                    >\n                </block>\n            </view>\n            <block v-if=\"admin\">\n                <view class=\"right-btn br60 white\" v-if=\"getResultBtn\" @tap=\"goToConfirm\"\n                    >去结算</view\n                >\n                <view class=\"right-btn br60 lighter\" style=\"background: #f2f2f2\" v-else\n                    >去结算</view\n                >\n            </block>\n        </view>\n\n        <!-- 是否删除商品的弹窗 -->\n        <u-modal\n            v-model=\"delPopup\"\n            :showCancelButton=\"true\"\n            comfirm-text=\"狠心删除\"\n            :confirm-color=\"themeColor\"\n            :show-title=\"false\"\n            @confirm=\"goodsDelete\"\n        >\n            <view style=\"padding-top: 40rpx\" class=\"flex row-center\">\n                <view style=\"margin: 50rpx 0\">确认删除该商品吗？</view>\n            </view>\n        </u-modal>\n        <tabbar />\n\n        <!-- 加载中 -->\n        <u-mask\n            :show=\"isChangeLoading\"\n            :mask-click-able=\"false\"\n            :custom-style=\"{ background: 'rgba(0, 0, 0, 0)' }\"\n        ></u-mask>\n        <view class=\"loading\" v-if=\"isChangeLoading\">\n            <u-loading size=\"40\" :color=\"themeColor\"></u-loading>\n            <view class=\"white m-t-20\"> 加载中... </view>\n        </view>\n    </view>\n</template>\n\n<script>\nimport {\n    apiCartLists, //商品列表\n    apiCartDel, //商品删除\n    apiCartCountChange, //商品数量改变\n    apiCartSelectChange, //选择商品\n    apiCartNum, //购物车数量\n    apiGetPage, //获取当前diy页面\n    apiclearAll //清空失效商品\n} from '@/api/store'\nimport { OrderTypeEnum } from '@/utils/enum'\nimport { trottle } from '@/utils/tools'\n\nexport default {\n    name: 'ShopCart',\n\n    data() {\n        return {\n            pagesData: [], //diy的组件\n            total_amount: '', //合计｜｜总余额\n            cartLists: [], //购物车数据\n            cartListsId: [], //购物车数据的所有ID\n            total_amount: '', //购物车合计金额\n            delPopup: false, //是否弹出删除商品的弹窗\n            cart_id: 0, //删除的购物车ID\n            isSelectedAll: false, //是否全选\n            isChangeLoading: false, //是否是操作请求中状态\n            option: [\n                {\n                    text: '删除',\n                    style: {\n                        backgroundColor: '#dd524d'\n                    }\n                }\n            ], //滑动组件配置\n            activeIndex: -1, //滑动组件开启对应的index\n            activeLists: [],\n            inactiveLists: [],\n            admin: true,\n            adminCheckAll: false\n        }\n    },\n\n    methods: {\n        //重选按钮\n        handlereCheck(goods_id, cart_id) {\n            this.$Router.push({\n                path: `/pages/goods_detail/goods_detail?id=${goods_id}&cart_id=${cart_id}&reCheck=1`\n            })\n        },\n\n        // 获取购物车数据列表\n        getCartList() {\n            return apiCartLists().then((res) => {\n                this.total_amount = res.total_amount\n                res.lists.forEach((item, index) => {\n                    res.lists[index].selected = item.selected == 1 ? true : false\n                })\n                this.cartLists = res.lists\n                this.baseSelect(res.lists)\n                this.$store.dispatch('getCartNum')\n                this.isChangeLoading = false\n                return Promise.resolve()\n            })\n        },\n\n        // 初始化商品的选中状态\n        baseSelect(data) {\n            this.cartListsId = []\n            const res = data.filter((el) => {\n                this.cartListsId.push(el.id)\n                return el.selected == false\n            })\n            this.isSelectedAll = true\n            this.goodsListActive.map((item) => {\n                if (!item.selected) this.isSelectedAll = false\n            })\n        },\n\n        // 商品数量的修改\n        countChange({ value }, id) {\n            this.isChangeLoading = true\n            apiCartCountChange({\n                cart_id: id,\n                goods_num: value\n            })\n                .then((res) => {\n                    this.$store.dispatch('getCartNum')\n                })\n                .finally(() => {\n                    this.getCartList()\n                })\n        },\n\n        // 弹窗拿到当前需要删除的商品购物车ID\n        changeDelPopup(cart_id) {\n            this.delPopup = true\n            this.cart_id = cart_id\n        },\n\n        // 删除购物车的商品\n        async goodsDelete() {\n            this.isChangeLoading = true\n            await apiCartDel({\n                cart_id: this.cart_id\n            })\n            await this.getCartList()\n            this.$toast({\n                title: '删除成功'\n            })\n        },\n\n        // 单选\n        changeGoodsStatus(status, id) {\n            this.isChangeLoading = true\n            status = status == 1 ? 0 : 1\n            apiCartSelectChange({\n                cart_id: [id],\n                selected: status\n            }).then((res) => {\n                this.getCartList()\n            })\n        },\n        //管理状态下单选商品\n        async adminGoodsStatus() {\n            console.log(this.cartLists)\n            await this.$nextTick()\n            const temp = this.cartLists.filter((item) => {\n                return item.adminCheck == true\n            })\n            if (temp.length == this.cartLists.length) {\n                this.adminCheckAll = true\n            } else {\n                this.adminCheckAll = false\n            }\n        },\n        // 全选商品\n        changeAllSelect() {\n            this.isChangeLoading = true\n            const status = this.isSelectedAll == true ? 0 : 1\n            const cartIDs = this.goodsListActive.map((item) => item.id)\n            apiCartSelectChange({\n                cart_id: cartIDs,\n                selected: status\n            }).then((res) => {\n                this.getCartList()\n            })\n        },\n        //管理商品状态下全选商品\n        adminAllSelect() {\n            this.cartLists.forEach((i) => {\n                i.adminCheck = !this.adminCheckAll\n            })\n        },\n\n        // 去购物\n        goShoping() {\n            this.$Router.replaceAll('/pages/index/index')\n        },\n\n        // 去结算\n        goToConfirm() {\n            const carts = this.cartLists.filter((item) => item.selected).map((item) => item.id)\n            if (carts.length == 0) return this.$toast({ title: '请选择商品' })\n            this.$Router.push({\n                path: '/pages/goods_order/goods_order',\n                query: {\n                    from: OrderTypeEnum['GOODS'],\n                    payload: {\n                        source: 'cart',\n                        cart_id: carts\n                    }\n                }\n            })\n        },\n\n        // 去首页\n        changeTab() {\n            this.$Router.replaceAll({\n                path: '/pages/index/index'\n            })\n        },\n\n        getPage() {\n            apiGetPage({\n                type: 4\n            }).then((res) => {\n                const {\n                    common: { title },\n                    common,\n                    content\n                } = res\n                uni.setNavigationBarTitle({\n                    title\n                })\n                this.pagesData = content\n            })\n        },\n        //滑动卡片关闭其他卡片（排他）--有效商品\n        handleactionOpen(index) {\n            this.activeIndex = this.activeLists[index].id\n        },\n        //滑动卡片关闭其他卡片（排他）--无效商品\n        handledisaactionOpen(index) {\n            this.activeIndex = this.inactiveLists[index].id\n        },\n        //滑动卡片删除按钮处理 --有效商品\n        handleactionClick(index) {\n            this.changeDelPopup(this.activeLists[index].id)\n        },\n        //滑动卡片删除按钮处理 --无效商品\n        handledisactionClick(index) {\n            this.changeDelPopup(this.inactiveLists[index].id)\n        },\n        //清空失效商品\n        async handleClearAll() {\n            this.isChangeLoading = true\n            const cart_ids = this.inactiveLists.map((item) => {\n                return item.id\n            })\n\n            await apiclearAll({ cart_ids })\n            this.getCartList()\n        },\n        //管理商品状态下删除\n        async handleAdminDel() {\n            this.isChangeLoading = true\n            console.log(this.cartLists)\n            const temp = this.cartLists.filter((item) => {\n                return item.adminCheck == true\n            })\n            const cart_ids = temp.map((i) => {\n                return i.id\n            })\n            if (cart_ids.length == 0) {\n                return (this.isChangeLoading = false)\n            }\n            await apiclearAll({ cart_ids })\n            this.getCartList()\n        }\n    },\n    computed: {\n        cartNum() {\n            return this.$store.state.cart.cartNum\n        },\n        getResultBtn() {\n            const carts = this.cartLists.filter((item) => item.selected).map((item) => item.id)\n            if (carts.length == 0) {\n                this.isSelectedAll = false\n                return false\n            } else {\n                return true\n            }\n        },\n\n        // 可售卖商品列表\n        goodsListActive() {\n            return (\n                this.cartLists.filter(\n                    (item) =>\n                        item.cart_status == 0 && item.sku_is_delete == 0 && item.sku_stock_none == 0\n                ) || []\n            )\n        },\n\n        // 是否可全选操作\n        selectAllDisabled() {\n            return !!!this.goodsListActive.length\n        }\n    },\n    watch: {\n        cartLists() {\n            //添加admincheck响应式属性，用于管理状态下删除商品\n            this.cartLists.forEach((item) => {\n                this.$set(item, 'adminCheck', false)\n            })\n            //过滤有效商品\n            this.activeLists = this.cartLists.filter((i) => {\n                return !(i.cart_status == 1 || (i.goods.spec_type == 1 && i.goods_item.stock == 0))\n            })\n            //过滤无效商品 单规格库存不足或者商品下架 多规格商品下架\n            this.inactiveLists = this.cartLists.filter((i) => {\n                return i.cart_status == 1 || (i.goods.spec_type == 1 && i.goods_item.stock == 0)\n            })\n        }\n    },\n    async onShow() {\n        // this.getCartNum()\n        await this.getCartList()\n        if (this.isLogin) {\n            this.getPage()\n        }\n    },\n\n    created() {\n        this.countChange = trottle(this.countChange, 200)\n    }\n}\n</script>\n<style lang=\"scss\">\n.shop-cart {\n    position: relative;\n    .loading {\n        position: fixed;\n        left: 39vw;\n        top: 35vh;\n        height: 170rpx;\n        width: 170rpx;\n        border-radius: 20rpx;\n        background: rgba(0, 0, 0, 0.5);\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n}\n.main {\n    padding-bottom: 100rpx;\n    .cart-header {\n        padding: 25rpx 20rpx;\n        display: flex;\n        justify-content: space-between;\n    }\n    .goods-container {\n        margin: 0 20rpx;\n        border-radius: 10rpx;\n    }\n    .disable-header {\n        padding: 25rpx 20rpx;\n        margin-top: 30rpx;\n        margin-left: 20rpx;\n        margin-right: 20rpx;\n        display: flex;\n        justify-content: space-between;\n        background-color: white;\n    }\n    .disable-body {\n        height: 160rpx;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n}\n\n.cart-list {\n    .cart-item {\n        margin: 20rpx 20rpx 0;\n\n        &.invalid {\n            opacity: 0.7;\n            // background-color: #999;\n            // @include background_color();\n        }\n    }\n\n    .select {\n        height: 80rpx;\n        // padding: 20rpx;\n        // @include border_color();\n        // border-style: solid;\n    }\n}\n\n.cart-null {\n    text-align: center;\n\n    .btn {\n        @include font_color();\n        @include border_color();\n        border-width: 1rpx;\n        border-style: solid;\n        width: 184rpx;\n        margin-left: auto;\n        margin-right: auto;\n        padding: 8rpx 24rpx;\n    }\n}\n\n.footer {\n    left: 0;\n    margin-bottom: 100rpx;\n    bottom: calc(env(safe-area-inset-bottom));\n    width: 100%;\n    z-index: 20;\n    height: 100rpx;\n    position: fixed;\n    padding: 0 24rpx;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    box-shadow: 0px 0px 12px rgba(0, 0, 0, 0.1);\n\n    .all-price {\n        text-align: right;\n        flex: 1;\n    }\n\n    .right-btn {\n        padding: 13rpx 45rpx;\n        @include background_color();\n    }\n}\n\n.login {\n    // height:calc(100vh - var(--window-bottom));\n    background: #fff;\n    text-align: center;\n\n    .btn {\n        width: 280rpx;\n        line-height: 70rpx;\n        margin: 40rpx auto 0;\n        background-color: #09bb07;\n\n        image {\n            width: 50rpx;\n            height: 50rpx;\n        }\n    }\n}\n.disable-tip {\n    position: relative;\n    .disable-text {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        text-align: center;\n        color: white;\n        background: rgba(0, 0, 0, 0.5);\n    }\n}\n.change-sku {\n    @include font_color();\n    @include border_color();\n    width: 112rpx;\n    height: 52rpx;\n    border-radius: 26rpx;\n    border: 1px solid;\n    text-align: center;\n    line-height: 52rpx;\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop_cart.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop_cart.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"red_theme\":\"#FF2C3C\",\"orange_theme\":\"#f7971e\",\"pink_theme\":\"#fa444d\",\"gold_theme\":\"#e0a356\",\"blue_theme\":\"#2f80ed\",\"green_theme\":\"#2ec840\"};\n    if(module.hot) {\n      // 1734801162852\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":true});\n      module.hot.dispose(cssReload);\n      \n    }\n  "],"sourceRoot":""}
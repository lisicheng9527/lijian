{"version":3,"sources":["uni-app:///main.js","webpack:////Users/lisicheng/project/mobile/bundle/pages/goods_comment_he/goods_comment_he.vue?22c7","webpack:////Users/lisicheng/project/mobile/bundle/pages/goods_comment_he/goods_comment_he.vue?f990","webpack:////Users/lisicheng/project/mobile/bundle/pages/goods_comment_he/goods_comment_he.vue?a173","webpack:////Users/lisicheng/project/mobile/bundle/pages/goods_comment_he/goods_comment_he.vue?d30c","uni-app:///bundle/pages/goods_comment_he/goods_comment_he.vue","webpack:////Users/lisicheng/project/mobile/bundle/pages/goods_comment_he/goods_comment_he.vue?0a31","webpack:////Users/lisicheng/project/mobile/bundle/pages/goods_comment_he/goods_comment_he.vue?9d1f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","data","goods_id","goodsPercent","goodsCategory","goodsCategoryCurrent","goodsCommentList","hasComment","methods","initCommentCategory","then","resolve","catch","reject","upCallback","size","id","page_no","page_size","count","mescroll","changeCategory","showCommentImage","uni","urls","current","onLoad","options","console","title","setTimeout","mounted"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,yBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyI;AACzI;AACoE;AACL;AACsC;;;AAGrG;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,uGAAM;AACR,EAAE,gHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,+RAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,aAAa,yOAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAA80B,CAAgB,8yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACiGl2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AAAA,eAEA;EACAC;EAEAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EAEAC;IACA;IACAC;MAAA;MACA;QACA;UACAP;QACA,GACAQ;UAAA;UACA;UACA,8CACAT;YAAA;UAAA;UACA;UACAU;QACA,GACAC;UACAC;QACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAAC;MACA;QACAC;QACAd;QACAe;QACAC;MACA,GACAR;QAAA;UAAAQ;UAAAC;QACA;QACA;QAEAC;MACA,GACAR;QACAQ;MACA;IACA;IAEA;IACAC;MACA;MACAD;IACA;IAEA;IACAE;MACA;MACAC;QACAC;QACAC;MACA;IACA;EACA;EAEAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAC;cAAA;cAAA,IAGAA;gBAAA;gBAAA;cAAA;cAAA;YAAA;cACA;cAAA;cAAA,OACA;gBACA;gBACA;kBACA;oBACAP;kBACA;gBACA;cACA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAEAQ;cACA;gBAAAC;cAAA;cACAC;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA;EAEAC;IACAX;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACpMA;AAAA;AAAA;AAAA;AAAqkD,CAAgB,q8CAAG,EAAC,C;;;;;;;;;;;ACAzlD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"bundle/pages/goods_comment_he/goods_comment_he.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './bundle/pages/goods_comment_he/goods_comment_he.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods_comment_he.vue?vue&type=template&id=6badcc65&scoped=true&\"\nvar renderjs\nimport script from \"./goods_comment_he.vue?vue&type=script&lang=js&\"\nexport * from \"./goods_comment_he.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods_comment_he.vue?vue&type=style&index=0&id=6badcc65&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6badcc65\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"bundle/pages/goods_comment_he/goods_comment_he.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_comment_he.vue?vue&type=template&id=6badcc65&scoped=true&\"","var components\ntry {\n  components = {\n    mescrollContain: function () {\n      return import(\n        /* webpackChunkName: \"components/mescroll-contain/mescroll-contain\" */ \"@/components/mescroll-contain/mescroll-contain.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-image/u-image\" */ \"@/components/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uRate: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-rate/u-rate\" */ \"@/components/uview-ui/components/u-rate/u-rate.vue\"\n      )\n    },\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"components/uview-ui/components/u-empty/u-empty\" */ \"@/components/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_comment_he.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_comment_he.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"goods-comment-user\" :class=\"themeName\">\n    <view class=\"header\" v-if=\"hasComment\">\n      <!-- Title -->\n      <view class=\"title\">\n        <text>商品好评率</text>\n        <text :style=\"{ color: themeColor }\">{{ goodsPercent }}</text>\n      </view>\n\n      <!-- Navigation -->\n      <view class=\"nav\">\n        <block v-for=\"(item, index) in goodsCategory\" :key=\"item.id\">\n          <view\n            :class=\"[\n              'nav-item',\n              { 'nav-item--active': item.id === goodsCategoryCurrent.id },\n            ]\"\n            @tap=\"changeCategory(item)\"\n          >\n            <text>{{ item.name }}</text>\n            <text>{{ \"(\" + item.count + \")\" }}</text>\n          </view>\n        </block>\n      </view>\n    </view>\n\n    <!-- Main -->\n    <view class=\"main\" v-show=\"hasComment\">\n      <mescroll-contain\n        height=\"80%\"\n        :up-option=\"{ auto: false }\"\n        :down-option=\"{ auto: false }\"\n        @upcallback=\"upCallback\"\n        ref=\"mescroll\"\n      >\n        <view class=\"contain\">\n          <view\n            class=\"evaluate nr\"\n            v-for=\"item in goodsCommentList\"\n            :key=\"item.id\"\n          >\n            <!-- 用户信息 -->\n            <view class=\"flex\">\n              <u-image\n                width=\"70\"\n                height=\"70\"\n                mode=\"scaleToFill\"\n                border-radius=\"50%\"\n                :src=\"item.avatar\"\n              />\n              <text class=\"m-l-20 m-r-20\">{{ item.nickname }}</text>\n              <u-rate\n                :current=\"item.goods_comment\"\n                :active-color=\"themeColor\"\n                :disabled=\"true\"\n              />\n            </view>\n            <!-- 订单信息 -->\n            <view class=\"muted xs m-t-10\">\n              <text>{{ item.create_time }}</text>\n              <text class=\"m-l-20 skuline\">{{ item.spec_value_str }}</text>\n            </view>\n            <!-- 评价文本 -->\n            <view class=\"m-t-16\">{{ item.comment }}</view>\n            <!-- 评价图片 -->\n            <view class=\"evaluate-images\" v-if=\"item.image\">\n              <u-image\n                class=\"m-r-16 m-t-16\"\n                v-for=\"(imageItem, imageIndex) in item.image\"\n                :key=\"imageItem\"\n                :src=\"imageItem\"\n                width=\"200\"\n                height=\"200\"\n                mode=\"scaleToFill\"\n                @tap=\"showCommentImage(item.image, imageIndex)\"\n              />\n            </view>\n            <!-- 商家回复 -->\n            <view class=\"evaluate-reply\" v-if=\"item.reply\">\n              <text class=\"m-r-20 muted\">商家回复:</text>\n              <text>{{ item.reply }}</text>\n            </view>\n          </view>\n        </view>\n      </mescroll-contain>\n    </view>\n    <u-empty\n      :show=\"!hasComment\"\n      text=\"暂无评价\"\n      src=\"/static/images/empty/evaluate.png\"\n      :icon-size=\"280\"\n      margin-top=\"280\"\n    ></u-empty>\n  </view>\n</template>\n\n<script>\nimport { apiGoodsCommentCategory, apiGoodsCommentList } from \"@/api/goods\";\n\nlet mescroll = null;\n\nexport default {\n  name: \"GoodsCommentHe\",\n\n  data() {\n    return {\n      goods_id: \"\", // 商品ID\n      goodsPercent: \"\", // 好评率\n      goodsCategory: [], // 评论分类\n      goodsCategoryCurrent: {}, // 分类当前\n      goodsCommentList: [], // 评价列表\n      hasComment: false, // 是否有评价数据\n    };\n  },\n\n  methods: {\n    // 初始化评价分类\n    initCommentCategory() {\n      return new Promise((resolve, reject) => {\n        apiGoodsCommentCategory({\n          goods_id: this.goods_id,\n        })\n          .then((data) => {\n            this.goodsPercent = data.percent ?? \"0%\";\n            this.goodsCategory =\n              data.comment.filter((item) => item.count) ?? [];\n            this.goodsCategoryCurrent = this.goodsCategory[0];\n            resolve(data);\n          })\n          .catch((err) => {\n            reject(err);\n          });\n      });\n    },\n\n    // 上拉加载更多\n    upCallback({ num, size }) {\n      apiGoodsCommentList({\n        id: this.goodsCategoryCurrent.id,\n        goods_id: this.goods_id,\n        page_no: num,\n        page_size: size,\n      })\n        .then(({ lists, page_size, count }) => {\n          if (num === 1) this.goodsCommentList = [];\n          this.goodsCommentList = [...this.goodsCommentList, ...lists];\n\n          mescroll.endBySize(page_size, count);\n        })\n        .catch((err) => {\n          mescroll.endBySize();\n        });\n    },\n\n    // 更改分类\n    changeCategory(item) {\n      this.goodsCategoryCurrent = item;\n      mescroll.downCallback();\n    },\n\n    // 查看评价图片\n    showCommentImage(list, index) {\n      // 预览图片\n      uni.previewImage({\n        urls: list,\n        current: index,\n      });\n    },\n  },\n\n  async onLoad() {\n    const options = this.$Route.query;\n\n    try {\n      if (!options.id) throw new Error();\n      this.goods_id = options.id;\n      await this.initCommentCategory().then(() => {\n        this.hasComment = !!this.goodsCategory.length ? true : false;\n        if (this.hasComment) {\n          this.$nextTick(() => {\n            mescroll.downCallback();\n          });\n        }\n      });\n    } catch (err) {\n      console.log(err);\n      this.$toast({ title: \"页面异常\" });\n      setTimeout(() => {\n        this.$Router.back();\n      }, 1.2 * 1000);\n    }\n  },\n\n  mounted() {\n    mescroll = this.$refs[\"mescroll\"];\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.goods-comment-user {\n  display: flex;\n  flex-direction: column;\n  max-height: 100vh;\n  overflow: hidden;\n  // padding: 20rpx 0;\n}\n\n.header {\n  background-color: #ffffff;\n\n  .title {\n    display: flex;\n    align-items: center;\n    height: 80rpx;\n    padding: 0 20rpx;\n    border-bottom: $-solid-border;\n    font-size: $-font-size-xs;\n    color: $-color-lighter;\n  }\n\n  .nav {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 20rpx;\n    font-size: $-font-size-xs;\n\n    &-item {\n      padding: 8rpx 30rpx;\n      border-radius: 60px;\n      margin: 10rpx 10rpx 0 0;\n      background-color: #f4f4f4;\n\n      &--active {\n        @include background_color();\n        color: #ffffff;\n      }\n    }\n  }\n}\n\n.main {\n  flex: 1;\n  margin-top: 20rpx;\n  overflow: hidden;\n\n  .evaluate {\n    padding: 24rpx;\n    background-color: #ffffff;\n\n    &:nth-child(n + 2) {\n      border-top: $-solid-border;\n    }\n\n    &-images {\n      display: flex;\n      flex-wrap: wrap;\n    }\n\n    &-reply {\n      position: relative;\n      padding: 30rpx 20rpx;\n      margin-top: 30rpx;\n      border-radius: 8px;\n      font-size: $-font-size-nr;\n      background-color: #f6f6f6;\n      word-break: break-all;\n      &::after {\n        position: absolute;\n        top: calc(-20rpx * 2);\n        left: 40rpx;\n        display: block;\n        content: \"\";\n        width: 0;\n        height: 0;\n        border-top: 20rpx solid transparent;\n        border-right: 20rpx solid transparent;\n        border-left: 20rpx solid transparent;\n        border-bottom: 20rpx solid #f6f6f6;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_comment_he.vue?vue&type=style&index=0&id=6badcc65&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_comment_he.vue?vue&type=style&index=0&id=6badcc65&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1733935393389\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
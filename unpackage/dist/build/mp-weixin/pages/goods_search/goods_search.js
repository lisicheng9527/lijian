(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods_search/goods_search"],{"4cbf":function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("1ae9");i(n("3240"));var s=i(n("e387"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(s.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"55a2":function(e,t,n){"use strict";var i=n("69c3"),s=n.n(i);s.a},"69c3":function(e,t,n){},"72e1":function(e,t,n){"use strict";(function(e){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(n("af34")),o=i(n("7ca3")),r=n("d95d"),c=i(n("26f4"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={name:"Search",mixins:[c.default],data:function(){return{showScreen:!1,goodsList:[],goodsSearchHistory:[],goodsSearchHistoryLoading:!0,searchStatus:!1,goodsCardStyle:"square",search:{is_member_price:"",max_price:"",min_price:"",name:"",category_id:"",price:"",sale:"",brand_id:""},brandLists:[],vipLists:[{name:"参与",value:1},{name:"不参与",value:0}]}},methods:{mescrollInit:function(e){this.mescroll=e},downCallback:function(){this.mescroll.resetUpScroll()},upCallback:function(e){var t=this;if(this.searchStatus){var n=e.num,i=e.size;(0,r.apiGoodsLists)(u(u({},this.search),{},{page_no:n,page_size:i})).then((function(n){var i=n.lists,o=(n.page_size,n.count);1==e.num&&(t.goodsList=[]),t.goodsList=[].concat((0,s.default)(t.goodsList),(0,s.default)(i)),t.mescroll.endSuccess(i.length,o)})).catch((function(){t.mescroll.endErr()}))}},goGoodsDetail:function(e){this.$Router.push({path:"/pages/goods_detail/goods_detail",query:{id:e}})},focusSearch:function(){this.initSearchHistoryData()},handleSearch:function(e){console.log(123456),this.searchStatus=!0,this.$set(this.search,"name",e),this.mescroll&&this.mescroll.resetUpScroll()},handlemenber:function(e){console.log(123456,e),this.search.is_member_price=e},onSearchHistoryClear:function(){var t=this;e.showModal({title:"温馨提示",content:"是否清空搜索记录?",confirmColor:this.themeColor,success:function(e){var n=e.confirm;n&&(0,r.apiSearchHistoryClear)().then((function(){t.initSearchHistoryData()})).catch((function(){t.$toast({title:"操作失败"})}))}})},handSortOptions:function(e){switch(e){case"all":this.$set(this.search,"sale",""),this.$set(this.search,"price","");break;case"sale":this.$set(this.search,"price",""),this.$set(this.search,"sale",this.getSortReverse(this.search.sale));break;case"price":this.$set(this.search,"sale",""),this.$set(this.search,"price",this.getSortReverse(this.search.price));break}this.mescroll.resetUpScroll()},getSortReverse:function(e){switch(e){case"asc":return"desc";case"desc":return"asc";default:return"desc"}},initSearchHistoryData:function(){var e=this;(0,r.apiSearchHistory)().then((function(t){e.goodsSearchHistory=t})).catch((function(t){throw e.$toast({title:"搜索记录获取失败"}),new Error(t)})).finally((function(){e.goodsSearchHistoryLoading=!1}))},getSearchList:function(){var e=this;(0,r.apiBrandLists)({page_size:999}).then((function(t){e.brandLists=t.lists}))},handleScreen:function(e){this.search.brand_id=e.id},handleConfirm:function(){this.showScreen=!1,this.mescroll.resetUpScroll()},handleReset:function(){this.search.brand_id="",this.search.is_member_price="",this.search.max_price="",this.search.min_price="",this.showScreen=!1,this.mescroll.resetUpScroll()}},onLoad:function(){var e=this.$Route.query;"{}"!==JSON.stringify(e)&&e.id&&this.$set(this.search,"category_id",e.id)&&this.handleSearch(""),this.initSearchHistoryData(),this.getSearchList()}};t.default=h}).call(this,n("df3c")["default"])},8787:function(e,t,n){"use strict";n.r(t);var i=n("72e1"),s=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=s.a},d1e2:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uSticky:function(){return n.e("components/uview-ui/components/u-sticky/u-sticky").then(n.bind(null,"32ad"))},uSearch:function(){return n.e("components/uview-ui/components/u-search/u-search").then(n.bind(null,"725e"))},uIcon:function(){return n.e("components/uview-ui/components/u-icon/u-icon").then(n.bind(null,"3ee8"))},uLoading:function(){return n.e("components/uview-ui/components/u-loading/u-loading").then(n.bind(null,"b973"))},sortIcon:function(){return n.e("components/sort-icon/sort-icon").then(n.bind(null,"ffc85"))},goodsCard:function(){return n.e("components/goods-card/goods-card").then(n.bind(null,"c72b"))},uPopup:function(){return n.e("components/uview-ui/components/u-popup/u-popup").then(n.bind(null,"c7c8"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("components/uview-ui/components/u-input/u-input")]).then(n.bind(null,"33af"))}},s=function(){var e=this,t=e.$createElement,n=(e._self._c,e.goodsSearchHistoryLoading?null:e.goodsSearchHistory.length);e._isMounted||(e.e0=function(t){e.goodsCardStyle="square"},e.e1=function(t){e.goodsCardStyle="rectangle"},e.e2=function(t){e.showScreen=!0}),e.$mp.data=Object.assign({},{$root:{g0:n,a0:{auto:!0,noMoreSize:10,empty:{icon:"/static/images/empty/shop.png",tip:"没有找到商品~",fixed:!0}}}})},o=[]},e387:function(e,t,n){"use strict";n.r(t);var i=n("d1e2"),s=n("8787");for(var o in s)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(o);n("55a2");var r=n("828b"),c=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,"6d30518b",null,!1,i["a"],void 0);t["default"]=c.exports}},[["4cbf","common/runtime","common/vendor"]]]);
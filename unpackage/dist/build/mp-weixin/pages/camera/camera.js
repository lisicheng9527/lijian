(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/camera/camera"],{"192c":function(t,e,n){"use strict";n.r(e);var i=n("ff34"),r=n("78dc");for(var o in r)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n("cf96");var c=n("828b"),a=Object(c["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=a.exports},"78dc":function(t,e,n){"use strict";n.r(e);var i=n("e771"),r=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a},a5d1:function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("1ae9");i(n("3240"));var r=i(n("192c"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},b479:function(t,e,n){},cf96:function(t,e,n){"use strict";var i=n("b479"),r=n.n(i);r.a},e771:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{reckon:"00:00",isTranscribe:!0,videoSrc:"",isError:!1,timer:null,svideoPath:""}},methods:{handleError:function(e){console.error(e),t.showToast({title:"请打开摄像头权限",icon:"error"})},submit:function(){var e=this;t.getFileSystemManager().getFileInfo({filePath:this.videoSrc,success:function(){var n=getCurrentPages(),i=n[n.length-2];i.setData({temporaryUrl:e.videoSrc}),t.navigateBack({delta:1})}})},transcribe:function(){var e=this;this.isError?t.showToast({title:"请打开摄像头权限",icon:"error"}):this.isTranscribe?(t.showLoading({title:"开始准备中"}),setTimeout((function(){e.$refs.camera.startRecord({timeout:2e4,success:function(){e.begin(),t.hideLoading(),e.isTranscribe=!1},fail:function(e){console.error(e),t.getSystemInfo({success:function(){e.errMsg.includes("invoke")&&(t.hideLoading(),t.showToast({title:"请开启麦克风权限",icon:"error"}))}})}})}),1e3)):(t.showLoading({title:"视频生成中",mask:!0}),setTimeout((function(){clearInterval(e.timer),e.$refs.camera.stopRecord({success:function(n){e.videoSrc=n.tempVideoPath,console.log(n),e.isTranscribe=!0,setTimeout((function(){t.hideLoading()}),10)},fail:function(){t.hideLoading(),t.showToast({title:"拍摄失败，请重置",icon:"error"})}})}),500))},begin:function(){var t=this;this.timer=setInterval((function(){var e=t.reckon.split(":"),n=parseInt(e[0]),i=parseInt(e[1])+1;60===i&&(i=0,n+=1),t.reckon="".concat(n<10?"0":"").concat(n,":").concat(i<10?"0":"").concat(i)}),1e3)},retake:function(){this.isError?t.showToast({title:"请打开摄像头权限",icon:"error"}):0!==parseInt(this.reckon.split(":")[1])&&(t.showToast({title:"重置中 ~",mask:!0,icon:"loading",duration:1e3}),clearInterval(this.timer),this.videoSrc="",this.isTranscribe=!0,this.reckon="00:00")}},mounted:function(){this.$refs.camera=t.createCameraContext()}};e.default=n}).call(this,n("df3c")["default"])},ff34:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){}));var i=function(){var t=this.$createElement;this._self._c},r=[]}},[["a5d1","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/scan/scan"],{"08f2":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){}));var i=function(){var e=this.$createElement;this._self._c},n=[]},5052:function(e,t,o){},"6d74":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o("2dd9"),n={data:function(){return{formName:"",temporaryUrl:"",fileType:"",fileName:""}},onShow:function(){var e=getCurrentPages();e&&e.length&&e[1]&&e[1].data&&(this.temporaryUrl=e[1].data.temporaryUrl)},methods:{reset:function(){var e=this;this.$nextTick((function(){e.temporaryUrl="",e.$forceUpdate()}))},takePhoto:function(){this.$Router.push({path:"/pages/camera/camera"})},localUpload:function(){var t=this;e.chooseVideo({sourceType:["album"],success:function(e){console.log(e),t.temporaryUrl=e.tempFilePath}})},chooseVideo:function(){this.$Router.push({path:"/pages/camera/camera"})},uploadFile:function(t){var o=this,n={key:t.cosKey,policy:t.policy,name:"x-cos-return-body",success_action_status:200,"q-sign-algorithm":t.qSignAlgorithm,"q-ak":t.qAk,"q-key-time":t.qKeyTime,"q-signature":t.qSignature};t.securityToken&&(n["x-cos-security-token"]=t.securityToken),e.uploadFile({url:"https://"+t.cosHost,filePath:this.temporaryUrl,name:"file",formData:n,success:function(n){if(![200,204].includes(n.statusCode))return callback&&callback(n);console.log(t),(0,i.presignedUpload)({name:o.fileName,type:"video",fileuri:t.cosKey}).then((function(t){console.log(t),t.url&&(e.hideLoading(),e.setStorageSync("formName",o.formName),e.setStorageSync("fileUrl",t.url),o.$Router.push({path:"/pages/photo/photo"}))}))},error:function(e){console.log(e)}})},nextStep:function(){var t=this;if(this.formName)if(this.fileName="",this.fileType="",this.temporaryUrl){console.log(this.temporaryUrl),this.fileType=this.temporaryUrl.split(".")[1];var o=this.fileType[0].split("/");this.fileName=o[o.length-1],e.showLoading({title:"视频上传中...",mask:!0}),(0,i.getPresignedUpload)({type:"video",filename:this.fileName,filetype:this.fileType}).then((function(e){t.uploadFile(e)}))}else e.showToast({title:"请先拍摄视频",icon:"none"});else e.showToast({title:"请输入手办名称",icon:"none"})}}};t.default=n}).call(this,o("df3c")["default"])},8089:function(e,t,o){"use strict";o.r(t);var i=o("6d74"),n=o.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(a);t["default"]=n.a},"8ceb":function(e,t,o){"use strict";var i=o("5052"),n=o.n(i);n.a},"8d71":function(e,t,o){"use strict";o.r(t);var i=o("08f2"),n=o("8089");for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);o("8ceb");var r=o("828b"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"3ebdf60f",null,!1,i["a"],void 0);t["default"]=s.exports},d465:function(e,t,o){"use strict";(function(e,t){var i=o("47a9");o("1ae9");i(o("3240"));var n=i(o("8d71"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(n.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])}},[["d465","common/runtime","common/vendor"]]]);
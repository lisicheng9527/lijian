<view class="{{['data-v-48060d9e',themeName]}}"><navbar vue-id="58b5427e-1" title="砍价进度" class="data-v-48060d9e" bind:__l="__l"></navbar><view class="bargain-progress data-v-48060d9e"><view class="header data-v-48060d9e"><block wx:if="{{status!=4}}"><view class="data-v-48060d9e"><block wx:if="{{status==0}}"><view class="white data-v-48060d9e" style="font-size:36rpx;margin-bottom:11rpx;">您正在发起砍价</view></block><block wx:if="{{status==1}}"><view class="white data-v-48060d9e" style="font-size:36rpx;margin-bottom:11rpx;">砍价中</view></block><block wx:if="{{status==2}}"><view class="white data-v-48060d9e" style="font-size:36rpx;margin-bottom:11rpx;">砍价成功</view></block><block wx:if="{{status==3}}"><view class="white data-v-48060d9e" style="font-size:36rpx;margin-bottom:11rpx;">砍价失败</view></block><block wx:if="{{status==0}}"><view class="white data-v-48060d9e" style="font-size:22rpx;margin-bottom:30rpx;">{{'邀请好友帮忙砍价 —— 砍至'+(bargainData.min_price||'')+'元即可发货'}}</view></block><block wx:if="{{status==1||status==2||status==3}}"><view class="white data-v-48060d9e" style="font-size:22rpx;margin-bottom:30rpx;">{{'邀请好友帮忙砍价 —— 砍至'+bargainData.floor_price+'元即可发货'}}</view></block></view></block><block wx:if="{{status==4}}"><view class="flex-col data-v-48060d9e"><view class="flex m-d-30 data-v-48060d9e"><u-image vue-id="58b5427e-2" width="80rpx" height="80rpx" shape="circle" src="{{bargainData.initiate_user.avatar}}" class="data-v-48060d9e" bind:__l="__l"></u-image><view class="flex-col m-l-20 data-v-48060d9e"><view class="white data-v-48060d9e" style="font-size:28rpx;">{{'来自'+bargainData.initiate_user.nickname+'的分享'}}</view><view class="white data-v-48060d9e" style="font-size:22rpx;">谢谢你的助力，动动手指帮我砍一刀</view></view></view></view></block><view class="goods-item flex bg-white m-t-30 data-v-48060d9e"><u-image vue-id="58b5427e-3" width="180rpx" height="180rpx" border-radius="10rpx" src="{{bargainData.goods_image}}" class="data-v-48060d9e" bind:__l="__l"></u-image><view class="goods-info m-l-15 flex-1 data-v-48060d9e"><view class="goods-name line-2 m-b-10 data-v-48060d9e">{{bargainData.goods_name||''}}</view><block wx:if="{{status==0}}"><view class="info-footer flex row-between m-t-5 data-v-48060d9e"><view class="flex-col data-v-48060d9e"><price vue-id="58b5427e-4" content="{{bargainData.min_price}}" prefix="最低可砍至￥" color="{{themeColor}}" mainSize="34rpx" minorSize="24rpx" class="data-v-48060d9e" bind:__l="__l"></price><price vue-id="58b5427e-5" content="{{bargainData.goods_max_price}}" prefix="原价￥" color="#999999" mainSize="24rpx" minorSize="24rpx" class="data-v-48060d9e" bind:__l="__l"></price></view></view></block><block wx:if="{{status==1||status==2||status==3||status==4}}"><view class="info-footer flex row-between m-t-5 flex-1 data-v-48060d9e"><view class="flex-col flex-1 data-v-48060d9e"><view style="color:#999999;font-size:24rpx;" class="data-v-48060d9e">{{''+bargainData.item_spec_value_str+''}}</view><view class="flex row-between flex-1 data-v-48060d9e"><view class="data-v-48060d9e"><price vue-id="58b5427e-6" content="{{bargainData.item_sell_price}}" prefix="原价￥" color="#999999" mainSize="24rpx" minorSize="24rpx" class="data-v-48060d9e" bind:__l="__l"></price></view><block wx:if="{{status==1}}"><view class="flex data-v-48060d9e"><view class="flex data-v-48060d9e"><u-count-down vue-id="58b5427e-7" timestamp="{{bargainData.end_time-nowTime}}" height="36" separator="zh" show-hours="{{false}}" show-minutes="{{false}}" show-seconds="{{false}}" font-size="{{24}}" separator-size="{{22}}" class="data-v-48060d9e" bind:__l="__l"></u-count-down><u-count-down vue-id="58b5427e-8" timestamp="{{(bargainData.end_time-nowTime)%(60*60*24)}}" color="#FFFFFF" height="36" separator="colon" show-days="{{false}}" font-size="{{24}}" separator-size="{{22}}" bg-color="{{bgColor||themeColor}}" separator-color="{{separatorColor||themeColor}}" class="data-v-48060d9e" bind:__l="__l"></u-count-down></view><view class="muted xs m-l-5 data-v-48060d9e">后结束帮砍</view></view></block></view></view></view></block></view></view></view><block wx:if="{{status==0}}"><view class="content data-v-48060d9e"><view class="title data-v-48060d9e">请选择商品规格</view><view class="choose-content flex row-between data-v-48060d9e"><view class="flex data-v-48060d9e"><view class="muted sm flex-none data-v-48060d9e">已选：</view><view class="md normal data-v-48060d9e">{{''+(specValueStr||'')+''}}</view></view></view><goods-spec vue-id="58b5427e-9" defaultInfo="{{$root.a0}}" stock_show="{{bargainData.stock_show}}" default-select="{{true}}" is-bargain="{{true}}" goods="{{bargainData.goods_id}}" buttons="{{specButtonsList}}" spec-list="{{bargainData.spec_value}}" spec-map="{{bargainData.spec_value_list}}" value="{{showGoodsSpec}}" data-event-opts="{{[['^change',[['changeGoodsSpec']]],['^confirm',[['handleConfirm']]],['^closer',[['e0']]],['^input',[['__set_model',['','showGoodsSpec','$event',[]]]]]]}}" bind:change="__e" bind:confirm="__e" bind:closer="__e" bind:input="__e" class="data-v-48060d9e" bind:__l="__l"></goods-spec><view data-event-opts="{{[['tap',[['onSelect',['$event']]]]]}}" class="lunch-btn white br60 flex row-center data-v-48060d9e" bindtap="__e">发起砍价</view></view></block><block wx:if="{{status==1||status==2||status==3}}"><view class="progressing data-v-48060d9e"><view class="progressing-heared data-v-48060d9e">已砍<text class="progressing-text data-v-48060d9e">{{bargainData.help_total}}</text>元，还差<text class="progressing-text data-v-48060d9e">{{bargainData.help_diff}}</text>元</view><view class="progress-container row-center flex data-v-48060d9e"><view class="progress m-r-16 data-v-48060d9e"><view class="progress-bar data-v-48060d9e" style="{{'width:'+(bargainData.precent+'%')+';'}}"></view></view><price vue-id="58b5427e-10" content="{{bargainData.floor_price}}" prefix="￥" mainSize="24rpx" minorSize="24rpx" color="{{themeColor}}" class="data-v-48060d9e" bind:__l="__l"></price></view><view class="m-b-35 flex row-center data-v-48060d9e"><block wx:if="{{status==2}}"><view class="data-v-48060d9e">恭喜您，砍价成功</view></block><block wx:if="{{status==3}}"><view class="data-v-48060d9e">非常遗憾，砍价失败</view></block></view><view class="p-btn data-v-48060d9e"><block wx:if="{{status==1}}"><view class="data-v-48060d9e"><block wx:if="{{bargainData.btns.buy_now_btn}}"><view class="flex flex-1 data-v-48060d9e"><view data-event-opts="{{[['tap',[['goToConfirm',['random']]]]]}}" class="flex row-center m-r-16 flex-1 btn-event data-v-48060d9e" bindtap="__e"><view class="lunch-btn-event white br60 flex row-center flex-1 data-v-48060d9e"></view><view class="lunch-btn-font data-v-48060d9e">{{'¥'+bargainData.current_price+' 直接购买'}}</view></view><view data-event-opts="{{[['tap',[['shareToBargain',['$event']]]]]}}" class="lunch-btn white br60 flex row-center flex-1 data-v-48060d9e" bindtap="__e">邀请好友帮砍价</view></view></block><block wx:else><view data-event-opts="{{[['tap',[['shareToBargain',['$event']]]]]}}" class="lunch-btn white br60 flex row-center data-v-48060d9e" bindtap="__e">邀请好友帮砍价</view></block></view></block><block wx:if="{{status==2}}"><view class="data-v-48060d9e"><block wx:if="{{bargainData.btns.buy_allow_btn}}"><view data-event-opts="{{[['tap',[['goToConfirm',['floor']]]]]}}" class="lunch-btn white br60 flex row-center data-v-48060d9e" bindtap="__e">立即购买</view></block><block wx:else><view data-event-opts="{{[['tap',[['goToOrder',['$event']]]]]}}" class="lunch-btn white br60 flex row-center data-v-48060d9e" bindtap="__e">查看订单</view></block></view></block><block wx:if="{{status==3}}"><view class="data-v-48060d9e"><view class="lunch-btn-fail white br60 flex row-center data-v-48060d9e">砍价失败</view></view></block></view><view class="bargain-code-content data-v-48060d9e"><view class="bargain-code-title flex row-between data-v-48060d9e"><view class="md normal bold data-v-48060d9e">砍价记录</view><view class="muted xs data-v-48060d9e">{{'已有'+bargainData.help_num+'人帮砍'}}</view></view><view class="code-content data-v-48060d9e"><block wx:for="{{bargainData.help_record}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="user-item row-between flex data-v-48060d9e"><view class="user-content flex data-v-48060d9e"><u-image vue-id="{{'58b5427e-11-'+index}}" width="80rpx" height="80rpx" shape="circle" src="{{item.avatar}}" class="data-v-48060d9e" bind:__l="__l"></u-image><view class="m-l-20 data-v-48060d9e"><view class="sm normal data-v-48060d9e">{{''+item.nickname+''}}</view><view class="muted xxs data-v-48060d9e">小刀一砍，惊喜满满</view></view></view><view class="bargain-price xs data-v-48060d9e">{{'¥'+(item.reduce_amount||0)+''}}</view></view></block></view></view></view></block><block wx:if="{{status==4}}"><view class="shareDetails data-v-48060d9e"><view class="s-btn data-v-48060d9e"><block wx:if="{{bargainData.tips}}"><view class="tips m-b-30 data-v-48060d9e">{{''+bargainData.tips+''}}</view></block><block wx:if="{{bargainData.btns.help_btn}}"><view data-event-opts="{{[['tap',[['onBargain',['$event']]]]]}}" class="lunch-btn white br60 flex row-center data-v-48060d9e" bindtap="__e">帮忙砍一刀</view></block><block wx:if="{{bargainData.btns.initiate_btn}}"><view data-event-opts="{{[['tap',[['onGoodsBargain',['$event']]]]]}}" class="lunch-btn-fail br60 flex row-center data-v-48060d9e" bindtap="__e">我也要砍价</view></block></view><view class="bargain-code-content data-v-48060d9e"><view class="bargain-code-title flex row-between data-v-48060d9e"><view class="md normal bold data-v-48060d9e">砍价记录</view><view class="muted xs data-v-48060d9e">{{'已有'+$root.g0+'人帮砍'}}</view></view><view class="code-content data-v-48060d9e"><block wx:for="{{bargainData.help_record}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="user-item row-between flex data-v-48060d9e"><view class="user-content flex data-v-48060d9e"><u-image vue-id="{{'58b5427e-12-'+index}}" width="80rpx" height="80rpx" shape="circle" src="{{item.avatar}}" class="data-v-48060d9e" bind:__l="__l"></u-image><view class="m-l-20 data-v-48060d9e"><view class="sm normal data-v-48060d9e">{{''+item.nickname+''}}</view><view class="muted xxs data-v-48060d9e">小刀一砍，惊喜满满</view></view></view><view class="bargain-price xs data-v-48060d9e">{{'¥'+(item.reduce_amount||0)+''}}</view></view></block></view></view></view></block><u-popup bind:input="__e" vue-id="58b5427e-13" mode="center" value="{{showBargainPop}}" data-event-opts="{{[['^input',[['__set_model',['','showBargainPop','$event',[]]]]]]}}" class="data-v-48060d9e" bind:__l="__l" vue-slots="{{['default']}}"><view class="bargain-pop-container data-v-48060d9e"><view class="md normal bold flex row-center data-v-48060d9e" style="padding-top:64rpx;">恭喜您成功砍下<text class="lg data-v-48060d9e" style="color:#ff2c3c;">{{$root.g1}}</text>元</view><block wx:if="{{status!=4}}"><view class="bold md flex row-center data-v-48060d9e" style="margin-top:38rpx;">还差<text class="m-l-20 differ-price data-v-48060d9e" style="color:#ff2c3c;">{{diffPrice}}<text style="font-size:40rpx;" class="data-v-48060d9e">元</text></text></view></block><block wx:if="{{status==4}}"><view class="bold xxl flex row-center data-v-48060d9e" style="margin-top:38rpx;color:#ff2c3c;">已为好友砍价成功</view></block><view class="progress-container row-center flex data-v-48060d9e"><view class="progress data-v-48060d9e"><view class="progress-bar data-v-48060d9e" style="{{'width:'+(precent+'%')+';'}}"></view></view></view><view class="row-center flex data-v-48060d9e"><block wx:if="{{status!=4}}"><view data-event-opts="{{[['tap',[['shareToBargain',['$event']]]]]}}" class="invite-btn row-center md flex data-v-48060d9e" bindtap="__e">邀请好友帮砍</view></block><block wx:if="{{status==4}}"><view data-event-opts="{{[['tap',[['closeBargainPop',['$event']]]]]}}" class="invite-btn row-center md flex data-v-48060d9e" bindtap="__e">确定</view></block></view></view><view class="close-icon flex row-center data-v-48060d9e" mode="bottom" data-event-opts="{{[['tap',[['closeBargainPop',['$event']]]]]}}" bindtap="__e"><u-icon vue-id="{{('58b5427e-14')+','+('58b5427e-13')}}" name="close-circle" size="68rpx" color="#fff" class="data-v-48060d9e" bind:__l="__l"></u-icon></view></u-popup><share-popup bind:input="__e" vue-id="58b5427e-15" share-id="{{initiateId}}" pagePath="bundle/pages/bargain_progress/bargain_progress" type="{{4}}" bargain="{{$root.a1}}" config="{{$root.a2}}" value="{{showSharePop}}" data-event-opts="{{[['^input',[['__set_model',['','showSharePop','$event',[]]]]]]}}" class="data-v-48060d9e" bind:__l="__l"></share-popup></view><page-status vue-id="58b5427e-16" status="{{pageStatus}}" class="data-v-48060d9e" bind:__l="__l" vue-slots="{{['error']}}"><u-empty vue-id="{{('58b5427e-17')+','+('58b5427e-16')}}" text="加载异常" class="data-v-48060d9e" slot="error" bind:__l="__l"></u-empty></page-status></view>
require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["bundle/pages/user_order/user_order"],{1937:function(e,t,n){e.exports={red_theme:"#FF2C3C",orange_theme:"#f7971e",pink_theme:"#fa444d",gold_theme:"#e0a356",blue_theme:"#2f80ed",green_theme:"#2ec840"}},"764c":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var r={navbar:function(){return Promise.all([n.e("common/vendor"),n.e("components/navbar/navbar")]).then(n.bind(null,"5b0f6"))},uTabs:function(){return n.e("components/uview-ui/components/u-tabs/u-tabs").then(n.bind(null,"1e47"))},mescrollUni:function(){return Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(n.bind(null,"4b63"))},goodsCard:function(){return n.e("components/goods-card/goods-card").then(n.bind(null,"c72b"))},price:function(){return n.e("components/price/price").then(n.bind(null,"3feb"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.isLogin?{auto:!1,noMoreSize:3,empty:{icon:"/static/images/empty/order.png",tip:"暂无订单~",fixed:!0}}:null),r=e.isLogin?e.__map(e.tabsList,(function(t,n){var r=e.__get_orig(t),a=e.currentTab["sign"]===t["sign"]?e.__map(e.tabsList[n].list,(function(t,n){var r=e.__get_orig(t),a=[1,2,3,5].includes(t.order_type),i=e.__map(t.order_goods,(function(t,n){var r=e.__get_orig(t);return{$orig:r,a1:{"border-raius":0,height:"230rpx"}}})),s=e.orderstatusText(t),o=s?e.orderstatusTitle(t):null,u=s?e.orderstatusText(t):null,c=t.buttons.length;return{$orig:r,g0:a,l0:i,m0:s,m1:o,m2:u,g1:c}})):null;return{$orig:r,l1:a}})):null;e.$mp.data=Object.assign({},{$root:{a0:n,l2:r}})},i=[]},"81d4":function(e,t,n){"use strict";n.r(t);var r=n("764c"),a=n("a345");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("c3eb");var s=n("828b"),o=Object(s["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);t["default"]=o.exports},a345:function(e,t,n){"use strict";n.r(t);var r=n("f02c"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},c3eb:function(e,t,n){"use strict";var r=n("1937"),a=n.n(r);a.a},e95a:function(e,t,n){"use strict";(function(e,t){var r=n("47a9");n("1ae9");r(n("3240"));var a=r(n("81d4"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},f02c:function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("af34")),i=r(n("7ca3")),s=n("98c6"),o=r(n("e964")),u=n("93d1"),c=r(n("26f4")),l=n("8f59"),d=r(n("6c23"));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"OrderList",mixins:[o.default,c.default],data:function(){return{tabsList:[{sign:"all",name:"全部",list:[]},{sign:"pay",name:"待付款",list:[]},{sign:"delivery",name:"待发货",list:[]},{sign:"take",name:"待收货",list:[]},{sign:"finish",name:"已完成",list:[]},{sign:"close",name:"已关闭",list:[]}],tabsIndex:"",orderStatus:{0:{name:"待付款",style:"primary"},1:{name:"待发货",style:"primary"},2:{name:"待收货",style:"primary"},3:{name:"已完成",style:"primary"},4:{name:"已关闭",style:"muted"}},orderSelffetchStatus:{0:{name:"待付款",style:"primary"},1:{name:"待取货",style:"primary"},2:{name:"待收货",style:"primary"},3:{name:"已完成",style:"primary"},4:{name:"已关闭",style:"muted"}},orderType:{1:{name:"拼团",style:"pink"},2:{name:"秒杀",style:"red"},3:{name:"砍价",style:"blue"},5:{name:"预售",style:"purple"}}}},computed:{currentTab:function(){return this.tabsList[this.tabsIndex]||{}},mapTabsItem:function(){var e=this;return function(t){return e.tabsList.find((function(e){return e["sign"]===t}))}}},methods:m(m({},(0,l.mapGetters)(["isLogin"])),{},{orderstatusTitle:function(e){switch(e.order_status){case 0:return 5==e.pay_way?"线下付款":"待支付";case 1:return 1==e.order_type?"拼团中":2==e.delivery_type?"待取货":"待发货";case 2:return"待收货";default:return""}},orderstatusText:function(e){switch(e.order_status){case 0:return 5==e.pay_way?"如已付款，请通知商家【确认收款】":"订单待支付";case 1:return 1==e.order_type&&0==e.is_team_success?"拼团成功后发货":2==e.delivery_type?"请前往指定门店取货":5==e.order_type?e.presell.order_send_text:"商品准备中";case 2:return"待确认收货";default:return""}},handleLogin:function(){d.default.set("back_url","/bundle/pages/user_order/user_order"),this.$Router.replace({path:"/pages/login/login"})},changeCurrentTab:function(e){this.tabsIndex=e,this.refreshOrderData()},refreshOrderData:function(){var e=this;this.$nextTick((function(){e.mescroll.resetUpScroll()}))},upCallback:function(e){var t=this,n=e.num,r=e.size,i=this.currentTab.sign;(0,s.apiOrderList)({type:i,page_no:n,page_size:r}).then((function(e){var r=e.lists,s=(e.page_size,e.count),o=t.mapTabsItem(i);r.forEach((function(e){var n;return e["buttons"]=null!==(n=t.getOrderStatusButtons(e.btn))&&void 0!==n?n:[]})),1===n&&(o.list=[]),o.list=[].concat((0,a.default)(o.list),(0,a.default)(r)),t.mescroll.endSuccess(r.length,s)})).catch((function(e){t.mescroll.endErr()}))},goOrderDetail:function(e){this.$Router.push({path:"/pages/order_detail/order_detail",query:{order_id:e}})}}),onLoad:function(){var t,n=this,r=this.$Route.query,a=null!==(t=r.mode)&&void 0!==t?t:"all",i=this.tabsList.findIndex((function(e){return e["sign"]===a}));this.isLogin&&(this.changeCurrentTab(i),setTimeout((function(){}),500),e.$on("duringPayment",(function(e){var t=e.result;t===u.PaymentStatusEnum["SUCCESS"]&&(n.$Router.back(),setTimeout((function(){n.$toast({title:"支付成功"})}),500),n.refreshOrderData())})))},onUnload:function(){e.$off("duringPayment")}};t.default=p}).call(this,n("df3c")["default"])}},[["e95a","common/runtime","common/vendor"]]]);
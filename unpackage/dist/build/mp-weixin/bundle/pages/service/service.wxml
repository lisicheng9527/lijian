<view class="{{[themeName]}}" style="height:100%;"><view class="chat flex-col"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="content" bindtap="__e"><scroll-view style="height:100%;" scroll-y="{{true}}" scroll-top="{{scrollTop}}" scroll-into-view="{{intoView}}" data-event-opts="{{[['scrolltoupper',[['scrollToupper',['$event']]]]]}}" bindscrolltoupper="__e"><block wx:if="{{pageStatus=='loading'}}"><view class="loading flex row-center"><u-loading vue-id="3b976256-1" mode="flower" size="40" bind:__l="__l"></u-loading></view></block><view class="chat-lists"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="{{['chat-item',(item.$orig.from_type=='user')?'right':'',(item.$orig.from_type=='kefu')?'left':'',(showIndex>index)?'visibility':'']}}" id="{{'chat-item_'+item.$orig.id}}"><block wx:if="{{item.$orig.type==1}}"><block wx:if="{{item.m0}}"><view class="text-center m-b-30 white"><view class="chat-tips xs">{{item.m1}}</view></view></block><view class="chat-info"><image class="avatar" src="{{item.m2}}"></image><block wx:if="{{item.$orig.msg_type==1}}"><view class="text-box"><rich-text nodes="{{item.m3}}"></rich-text></view></block><block wx:if="{{item.$orig.msg_type==2}}"><view class="image-box"><image class="image" mode="widthFix" src="{{item.m4}}" data-event-opts="{{[['tap',[['previewImage',[item.m5]]]]]}}" bindtap="__e"></image></view></block><block wx:if="{{item.$orig.msg_type==3}}"><view class="goods m-r-20 goods-box"><view class="goods-img m-r-20"><image style="width:140rpx;height:140rpx;" src="{{item.m6}}"></image></view><view class="goods-info flex-1"><view class="line-2">{{''+item.$orig.goods.name+''}}</view><view class="flex m-t-10 row-between"><price vue-id="{{'3b976256-2-'+index}}" content="{{item.$orig.goods.min_price}}" main-size="38rpx" minor-size="26rpx" color="{{themeColor}}" bind:__l="__l"></price></view></view></view></block></view></block><block wx:else><view class="text-center white"><view class="muted xs">{{item.$orig.msg}}</view></view></block></view></block></view><block wx:if="{{isError}}"><view class="error"><view class="error-msg text-center xs">{{errorMsg}}</view></view></block><view id="bottom"></view></scroll-view></view><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="footer" bindtap="__e"><view class="footer-input flex"><view data-event-opts="{{[['tap',[['uploadFile',['$event']]]]]}}" class="album" bindtap="__e"><image class="icon" src="/bundle/static/images/icon_album.png"></image></view><view class="input-contain flex"><input class="text-area" confirm-type="send" maxlength="-1" data-event-opts="{{[['focus',[['scrollToBottom',['$event']]]],['confirm',[['sendText',['$event']]]],['input',[['__set_model',['','msg','$event',[]]]]]]}}" value="{{msg}}" bindfocus="__e" bindconfirm="__e" bindinput="__e"/><image class="icon" src="/bundle/static/images/icon_emoji.png" data-event-opts="{{[['tap',[['handleEmojiShow',['$event']]]]]}}" bindtap="__e"></image></view><button class="send-btn" size="sm" data-event-opts="{{[['tap',[['sendText',['$event']]]]]}}" bindtap="__e">发送</button></view><view class="{{['emoji-wrap',(showEmoji)?'emoji-show':'']}}"><scroll-view style="height:100%;" scroll-y="true"><emoji bind:input="__e" vue-id="3b976256-3" data-event-opts="{{[['^input',[['handleEmojiInput']]]]}}" bind:__l="__l"></emoji></scroll-view></view></view><block wx:if="{{showGoods}}"><view class="goods"><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="close" bindtap="__e"><u-icon vue-id="3b976256-4" name="close-circle-fill" color="#ccc" size="40" bind:__l="__l"></u-icon></view><view class="goods-img m-r-20"><u-image vue-id="3b976256-5" width="140rpx" height="140rpx" src="{{goodsInfo.image}}" bind:__l="__l"></u-image></view><view class="goods-info flex-1"><view class="line-2">{{''+goodsInfo.name+''}}</view><view class="flex m-t-10 row-between"><price vue-id="3b976256-6" content="{{goodsInfo.min_price}}" main-size="38rpx" minor-size="26rpx" color="{{themeColor}}" bind:__l="__l"></price><view data-event-opts="{{[['tap',[['sendGoods',['$event']]]]]}}" class="send-btn" bindtap="__e">发送链接</view></view></view></view></block></view></view>
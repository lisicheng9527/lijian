<view class="{{[themeName]}}"><view class="user-sgin"><view class="header"><view class="flex"><view class="flex m-l-40"><u-image class="avatar" vue-id="b2d38146-1" width="110rpx" height="110rpx" shape="circle" src="{{avatar}}" bind:__l="__l"></u-image></view><view class="m-l-30 flex row-between" style="flex:1;"><view><view class="white" style="font-size:56rpx;">{{userIntegral}}</view><view class="flex"><view data-event-opts="{{[['tap',[['toSignRule',['$event']]]]]}}" class="sm flex white" bindtap="__e">我的积分<image class="m-l-10" style="height:30rpx;width:30rpx;" src="../../static/images/jifen_icon_help.png"></image></view></view></view><view data-event-opts="{{[['tap',[['toSignDetail',['$event']]]]]}}" class="score-detail-entry flex" bindtap="__e"><image style="width:26rpx;height:26rpx;flex:none;margin-right:7rpx;" src="../../static/images/jifen_icon_data.png"></image><text class="sm white">积分明细</text></view></view></view></view><view class="main"><block wx:if="{{isOpen}}"><view class="contain bg-white"><view class="title">{{"已累积签到 "+continuousDays+"天"}}</view><view class="day-list flex flex-wrap"><block wx:for="{{lists}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="item flex-col row-center col-center"><view class="{{['circle row-center '+(item.is_sign?'active-circle':'')]}}"><block wx:if="{{!item.is_sign}}"><view class="num xs lighter">{{"+"+item.integral}}</view></block><block wx:if="{{item.is_sign}}"><image class="num" src="../../static/images/jifen_icon_select.png"></image></block></view><view class="day m-t-10 lighter sm">{{item.day}}</view></view></block></view><view class="right-sgin"><button class="{{['lighter br60 '+(todaySign?'gray':'primary-button')]}}" size="md" data-event-opts="{{[['tap',[['userSignFun',['$event']]]]]}}" bindtap="__e">{{todaySign?'已签到':'立即签到'}}</button></view></view></block><block wx:if="{{!isOpen}}"><view class="contain-no bg-white flex-col col-center row-center"><view><u-image vue-id="b2d38146-2" width="72rpx" height="72rpx" shape="circle" src="{{$root.m0}}" bind:__l="__l"></u-image></view><view class="m-t-35 sm lighter">抱歉，该功能未开启</view></view></block><block wx:if="{{$root.g0>0}}"><view class="contain bg-white m-t-20"><view class="title flex"><view class="line br60 m-r-20"></view><view class="bold xl">赚积分</view></view><view class="task"><block wx:for="{{earn}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="item flex row"><image class="img m-r-20" src="{{item.icon}}"></image><view class="con"><view class="md">{{item.name}}</view><view class="xs"><text class="num mb20">{{"+"+item.integral}}</text><text>积分</text></view></view><button class="{{['btn br60 '+(item.is_done?'muted':'primary')]}}" style="{{('border-color: '+(item.is_done?'#BBBBBB':'#FF2C3C')+';')}}" hover-class="none" size="xs">{{item.is_done?'已完成':'未完成'}}</button></view></block></view></view></block></view></view><u-popup bind:input="__e" vue-id="b2d38146-3" mode="center" value="{{showPop}}" data-event-opts="{{[['^input',[['__set_model',['','showPop','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="pop-container"><view class="header-score flex row-center">{{"+"+totalIntegral}}</view><view class="box column-center"><view class="desc m-t-20 sm flex row-center"><view>获得</view><image style="width:28rpx;height:30rpx;margin-right:8rpx;margin-left:8rpx;" src="../../static/images/icon_jifen.png"></image><view>{{''+totalIntegral+''}}</view></view><view class="bottom-box"><view class="md" style="line-height:36rpx;">您已累积签到<text style="font-size:36rpx;color:#FF2C3C;">{{days}}</text>天</view></view><view data-event-opts="{{[['tap',[['onClose',['$event']]]]]}}" class="white br60 primary-btn" style="margin-top:26rpx;" bindtap="__e">确定</view></view></view></u-popup></view>
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/share-popup/share-popup"],{"0395":function(e,t,n){e.exports={red_theme:"#FF2C3C",orange_theme:"#f7971e",pink_theme:"#fa444d",gold_theme:"#e0a356",blue_theme:"#2f80ed",green_theme:"#2ec840"}},"299f":function(e,t,n){"use strict";var o=n("0395"),r=n.n(o);r.a},8823:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uPopup:function(){return n.e("components/uview-ui/components/u-popup/u-popup").then(n.bind(null,"c7c8"))}},r=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showshare=!1})},a=[]},a1dc:function(e,t,n){"use strict";n.r(t);var o=n("f4b6"),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},a65b:function(e,t,n){"use strict";n.r(t);var o=n("8823"),r=n("a1dc");for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("299f");var i=n("828b"),s=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},f4b6:function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("7eb4")),a=o(n("ee10")),i=n("11ba"),s=n("a619"),u={components:{poster:function(){n.e("components/share-popup/poster").then(function(){return resolve(n("8c0c"))}.bind(null,n)).catch(n.oe)}},props:{value:{type:Boolean},shareId:{type:[String,Number],default:""},pagePath:{type:String,default:""},config:{type:Object,default:function(){return{}}},type:Number,bargain:{type:Object,default:function(){return{}}},poster_img:{type:String,default:""}},data:function(){return{poster:"",showPoster:!1,showTips:!1,mnpQrcode:"",options:{}}},computed:{getLink:function(){return"".concat(s.baseURL).concat(s.basePath,"/").concat(this.pagePath,"?id=").concat(this.shareId,"&invite_code=").concat(this.userInfo.code)},showshare:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{getConfig:function(){var e=this;return(0,a.default)(r.default.mark((function t(){var n,o;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=4==e.type?{type:e.type,goods_id:e.bargain.goodsId,activity_id:e.bargain.activityId}:{goods_id:e.shareId,type:e.type,activity_id:e.shareId},t.next=3,(0,i.apiGoodsPosterConfig)(n);case 3:o=t.sent,e.options=o;case 5:case"end":return t.stop()}}),t)})))()},getPoster:function(){var t=this;return(0,a.default)(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.isLogin){n.next=2;break}return n.abrupt("return",t.$Router.push("/pages/login/login"));case 2:if(!t.poster){n.next=6;break}return t.showPoster=!0,t.showshare=!1,n.abrupt("return");case 6:return e.showLoading({title:"正在生成中"}),n.next=9,Promise.all([t.getConfig(),t.getMnpQrcode()]);case 9:setTimeout((function(){t.drawCanvas()}),100);case 10:case"end":return n.stop()}}),n)})))()},getMnpQrcode:function(){var e=this;return new Promise((function(t,n){(0,i.apiMnpQrCode)({id:e.shareId,page:e.pagePath}).then((function(n){e.mnpQrcode=n.qr_code,t(n)})).catch((function(){n()}))}))},drawCanvas:function(){this.$refs.poster.drawCanvas()},handleSuccess:function(t){this.poster=t,e.hideLoading(),this.showPoster=!0,this.showshare=!1},handleFail:function(){var t=this;e.hideLoading({success:function(){t.$toast({title:"生成失败"})}})},shareWx:function(){},savePoster:function(){var t=this;return(0,a.default)(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.saveImageToPhotosAlbum({filePath:t.poster,success:function(e){t.showPoster=!1,t.$toast({title:"保存成功",icon:"success"})},fail:function(e){t.$toast({title:"保存失败"}),console.log(e)}});case 1:case"end":return n.stop()}}),n)})))()}}};t.default=u}).call(this,n("df3c")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/share-popup/share-popup-create-component',
    {
        'components/share-popup/share-popup-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("a65b"))
        })
    },
    [['components/share-popup/share-popup-create-component']]
]);
